<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Orville.PostgreSQL.EntityTrace</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">orville-postgresql-libpq-0.10.0.0: ORM</span><ul class="links" id="page-menu"><li><a href="src/Orville.PostgreSQL.EntityTrace.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Orville.PostgreSQL.EntityTrace</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:EntityTraceT">EntityTraceT</a> trace = <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace)</li><li class="src short"><span class="keyword">data</span> <a href="#t:EntityTraceState">EntityTraceState</a> trace</li><li class="src short"><a href="#v:runEntityTraceT">runEntityTraceT</a> :: <a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> n =&gt; <a href="Orville-PostgreSQL-Internal-ErrorDetailLevel.html#t:ErrorDetailLevel" title="Orville.PostgreSQL.Internal.ErrorDetailLevel">ErrorDetailLevel</a> -&gt; <a href="Orville-PostgreSQL-Connection.html#t:Pool" title="Orville.PostgreSQL.Connection">Pool</a> <a href="Orville-PostgreSQL-Connection.html#t:Connection" title="Orville.PostgreSQL.Connection">Connection</a> -&gt; (<a href="Orville-PostgreSQL-Internal-OrvilleState.html#t:OrvilleState" title="Orville.PostgreSQL.Internal.OrvilleState">OrvilleState</a> -&gt; m a -&gt; n a) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceT" title="Orville.PostgreSQL.EntityTrace">EntityTraceT</a> trace m a -&gt; n (a, [trace])</li><li class="src short"><a href="#v:insertEntityTraced">insertEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; writeEntity -&gt; m readEntity</li><li class="src short"><a href="#v:updateEntityTraced">updateEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; readEntity -&gt; writeEntity -&gt; m ()</li><li class="src short"><a href="#v:deleteEntityTraced">deleteEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; key -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:TracedTable">TracedTable</a> trace key writeEntity readEntity</li><li class="src short"><a href="#v:mkTracedTable">mkTracedTable</a> :: (readEntity -&gt; key) -&gt; <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity</li><li class="src short"><a href="#v:addInsertTrace">addInsertTrace</a> :: (writeEntity -&gt; readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity</li><li class="src short"><a href="#v:addUpdateTrace">addUpdateTrace</a> :: (readEntity -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity</li><li class="src short"><a href="#v:addDeleteTrace">addDeleteTrace</a> :: (key -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity</li><li class="src short"><a href="#v:untracedTableDefinition">untracedTableDefinition</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity</li><li class="src short"><span class="keyword">class</span> <a href="../base-4.14.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="#t:MonadEntityTrace">MonadEntityTrace</a> trace m | m -&gt; trace <span class="keyword">where</span><ul class="subs"><li><a href="#v:recordTraces">recordTraces</a> :: [trace] -&gt; m ()</li><li><a href="#v:liftOrvilleUntraced">liftOrvilleUntraced</a> :: (<span class="keyword">forall</span> n. <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> n =&gt; n a) -&gt; m a</li></ul></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:EntityTraceT" class="def">EntityTraceT</a> trace = <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) <a href="src/Orville.PostgreSQL.EntityTrace.html#EntityTraceT" class="link">Source</a> <a href="#t:EntityTraceT" class="selflink">#</a></p><div class="doc"><p><code><a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceT" title="Orville.PostgreSQL.EntityTrace">EntityTraceT</a></code> is simply a synonym for <code><a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a></code> over an <code><a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a></code>.
  The <code><a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a></code> keeps track of what traces have been recorded,
  including keeping them in sync with any transaction or savepoint operations
  that are performed via the <code><a href="Orville-PostgreSQL-Internal-Transaction.html#v:withTransaction" title="Orville.PostgreSQL.Internal.Transaction">withTransaction</a></code> function. I.E. if a
  transaction or savepoint is rolled-back any traces that had been recorded by
  <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code>, <code>updateEntityTrace</code>, or <code>deletedEntityTraced</code> are also
  rolled-back.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:EntityTraceState" class="def">EntityTraceState</a> trace <a href="src/Orville.PostgreSQL.EntityTrace.html#EntityTraceState" class="link">Source</a> <a href="#t:EntityTraceState" class="selflink">#</a></p><div class="doc"><p>An <code><a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a></code> is created by <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> to keep track of
  the state of traces that are to be returned when the function finishes.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:EntityTraceState">Instances</h4><details id="i:EntityTraceState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EntityTraceState:MonadEntityTrace:1"></span> <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace (<a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m)</span> <a href="src/Orville.PostgreSQL.EntityTrace.html#line-571" class="link">Source</a> <a href="#t:EntityTraceState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EntityTraceState:MonadEntityTrace:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-EntityTrace.html">Orville.PostgreSQL.EntityTrace</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:recordTraces">recordTraces</a> :: [trace] -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m () <a href="src/Orville.PostgreSQL.EntityTrace.html#recordTraces" class="link">Source</a> <a href="#v:recordTraces" class="selflink">#</a></p><p class="src"><a href="#v:liftOrvilleUntraced">liftOrvilleUntraced</a> :: (<span class="keyword">forall</span> (n :: <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> n =&gt; n a) -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m a <a href="src/Orville.PostgreSQL.EntityTrace.html#liftOrvilleUntraced" class="link">Source</a> <a href="#v:liftOrvilleUntraced" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:EntityTraceState:MonadOrville:2"></span> <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> (<a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m)</span> <a href="src/Orville.PostgreSQL.EntityTrace.html#line-579" class="link">Source</a> <a href="#t:EntityTraceState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:EntityTraceState:MonadOrville:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-EntityTrace.html">Orville.PostgreSQL.EntityTrace</a></p></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runEntityTraceT" class="def">runEntityTraceT</a> :: <a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> n =&gt; <a href="Orville-PostgreSQL-Internal-ErrorDetailLevel.html#t:ErrorDetailLevel" title="Orville.PostgreSQL.Internal.ErrorDetailLevel">ErrorDetailLevel</a> -&gt; <a href="Orville-PostgreSQL-Connection.html#t:Pool" title="Orville.PostgreSQL.Connection">Pool</a> <a href="Orville-PostgreSQL-Connection.html#t:Connection" title="Orville.PostgreSQL.Connection">Connection</a> -&gt; (<a href="Orville-PostgreSQL-Internal-OrvilleState.html#t:OrvilleState" title="Orville.PostgreSQL.Internal.OrvilleState">OrvilleState</a> -&gt; m a -&gt; n a) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceT" title="Orville.PostgreSQL.EntityTrace">EntityTraceT</a> trace m a -&gt; n (a, [trace]) <a href="src/Orville.PostgreSQL.EntityTrace.html#runEntityTraceT" class="link">Source</a> <a href="#v:runEntityTraceT" class="selflink">#</a></p><div class="doc"><p><code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> runs an Orville action that has tracing behavior and
  returns the traces that were committed. Note that there will never be any
  uncommitted traces at the end because any <code><a href="Orville-PostgreSQL-Internal-Transaction.html#v:withTransaction" title="Orville.PostgreSQL.Internal.Transaction">withTransaction</a></code> block must by
  contained within the action passed  to <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code>. This function
  creates a new <code><a href="Orville-PostgreSQL-Internal-OrvilleState.html#t:OrvilleState" title="Orville.PostgreSQL.Internal.OrvilleState">OrvilleState</a></code> and passes it to the run function that you
  provide in order to enforce this.</p><p>Note that if an exception occurs in <code>m</code> and is not caught within the action passed
  to <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code>, you will lose any traces that may have happened up to
  the point of the action, including those related to database operations that were
  successfully committed. If you wish to respond to those traces, you need to catch
  the exception inside the action given to <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> so that it can return
  the traces to you.</p></div></div><div class="top"><p class="src"><a id="v:insertEntityTraced" class="def">insertEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; writeEntity -&gt; m readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#insertEntityTraced" class="link">Source</a> <a href="#v:insertEntityTraced" class="selflink">#</a></p><div class="doc"><p>Inserts an entity into the database via <code><a href="Orville-PostgreSQL.html#v:insertAndReturnEntity" title="Orville.PostgreSQL">insertAndReturnEntity</a></code>, then records
  any traces returned by the <code><a href="Orville-PostgreSQL-EntityTrace.html#v:addInsertTrace" title="Orville.PostgreSQL.EntityTrace">addInsertTrace</a></code> callbacks on the <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code>
  via <code><a href="Orville-PostgreSQL-EntityTrace.html#v:recordTraces" title="Orville.PostgreSQL.EntityTrace">recordTraces</a></code>.</p><p>See <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> for a stock way to run actions using these trace
  operations and get access to the traces that are recorded.</p></div></div><div class="top"><p class="src"><a id="v:updateEntityTraced" class="def">updateEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; readEntity -&gt; writeEntity -&gt; m () <a href="src/Orville.PostgreSQL.EntityTrace.html#updateEntityTraced" class="link">Source</a> <a href="#v:updateEntityTraced" class="selflink">#</a></p><div class="doc"><p>Updates an entity in the database via <code><a href="Orville-PostgreSQL.html#v:updateAndReturnEntity" title="Orville.PostgreSQL">updateAndReturnEntity</a></code>, then records
  any traces returned by the <code><a href="Orville-PostgreSQL-EntityTrace.html#v:addUpdateTrace" title="Orville.PostgreSQL.EntityTrace">addUpdateTrace</a></code> callbacks on the <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code>
  via <code><a href="Orville-PostgreSQL-EntityTrace.html#v:recordTraces" title="Orville.PostgreSQL.EntityTrace">recordTraces</a></code>.</p><p>See <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> for a stock way to run actions using these trace
  operations and get access to the traces that are recorded.</p></div></div><div class="top"><p class="src"><a id="v:deleteEntityTraced" class="def">deleteEntityTraced</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; key -&gt; m () <a href="src/Orville.PostgreSQL.EntityTrace.html#deleteEntityTraced" class="link">Source</a> <a href="#v:deleteEntityTraced" class="selflink">#</a></p><div class="doc"><p>Updates an entity in the database via <code><a href="Orville-PostgreSQL.html#v:deleteAndReturnEntity" title="Orville.PostgreSQL">deleteAndReturnEntity</a></code>, then records
  any traces returned by the <code><a href="Orville-PostgreSQL-EntityTrace.html#v:addDeleteTrace" title="Orville.PostgreSQL.EntityTrace">addDeleteTrace</a></code> callbacks on the <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code>
  via <code><a href="Orville-PostgreSQL-EntityTrace.html#v:recordTraces" title="Orville.PostgreSQL.EntityTrace">recordTraces</a></code>.</p><p>See <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code> for a stock way to run actions using these trace
  operations and get access to the traces that are recorded.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TracedTable" class="def">TracedTable</a> trace key writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#TracedTable" class="link">Source</a> <a href="#t:TracedTable" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code> is a regular <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> with callbacks for
  constructing the <code>trace</code> items that will be captured when functions such as
  <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code> are used. Use <code><a href="Orville-PostgreSQL-EntityTrace.html#v:mkTracedTable" title="Orville.PostgreSQL.EntityTrace">mkTracedTable</a></code> to build a <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code>
  with no callbacks and then use <code><a href="Orville-PostgreSQL-EntityTrace.html#v:addInsertTrace" title="Orville.PostgreSQL.EntityTrace">addInsertTrace</a></code> and friends to register
  callbacks callbacks on the table.</p></div></div><div class="top"><p class="src"><a id="v:mkTracedTable" class="def">mkTracedTable</a> :: (readEntity -&gt; key) -&gt; <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#mkTracedTable" class="link">Source</a> <a href="#v:mkTracedTable" class="selflink">#</a></p><div class="doc"><p>Constructs a <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code> that wraps the given <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> so that
  it can be used with functions such as <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code>. The resulting
  <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code> has no trace callbacks initially. You can <code><a href="Orville-PostgreSQL-EntityTrace.html#v:addInsertTrace" title="Orville.PostgreSQL.EntityTrace">addInsertTrace</a></code> and
  similar functions ta add callbacks.</p></div></div><div class="top"><p class="src"><a id="v:addInsertTrace" class="def">addInsertTrace</a> :: (writeEntity -&gt; readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#addInsertTrace" class="link">Source</a> <a href="#v:addInsertTrace" class="selflink">#</a></p><div class="doc"><p>Adds a callback that will be used during <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code> to build the
  <code>trace</code> items to be recorded for that insert. The trace building function
  will be passed the <code>writeEntity</code> given to <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code> as well as
  the <code>readEntity</code> that is returned as a result of the insert.</p></div></div><div class="top"><p class="src"><a id="v:addUpdateTrace" class="def">addUpdateTrace</a> :: (readEntity -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#addUpdateTrace" class="link">Source</a> <a href="#v:addUpdateTrace" class="selflink">#</a></p><div class="doc"><p>Adds a callback that will be used during <code><a href="Orville-PostgreSQL-EntityTrace.html#v:updateEntityTraced" title="Orville.PostgreSQL.EntityTrace">updateEntityTraced</a></code> to build the
  <code>trace</code> items to be recorded for that update. The trace building function
  will be passed the <code>readEntity</code> and <code>writeEntity</code> that were given to
  <code><a href="Orville-PostgreSQL-EntityTrace.html#v:updateEntityTraced" title="Orville.PostgreSQL.EntityTrace">updateEntityTraced</a></code> as well as the any <code>readEntity</code> that is returned as a
  result of the insert. If the update matches no rows in the database, <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>
  will be passed as the last argument to the trace building function.</p></div></div><div class="top"><p class="src"><a id="v:addDeleteTrace" class="def">addDeleteTrace</a> :: (key -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> readEntity -&gt; [trace]) -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#addDeleteTrace" class="link">Source</a> <a href="#v:addDeleteTrace" class="selflink">#</a></p><div class="doc"><p>Adds a callback that will be used during <code><a href="Orville-PostgreSQL-EntityTrace.html#v:deleteEntityTraced" title="Orville.PostgreSQL.EntityTrace">deleteEntityTraced</a></code> to build the
  <code>trace</code> items to be recorded for that update. The trace building function
  will be passed the <code>key</code> that sa given to <code><a href="Orville-PostgreSQL-EntityTrace.html#v:deleteEntityTraced" title="Orville.PostgreSQL.EntityTrace">deleteEntityTraced</a></code> as well as the
  any <code>readEntity</code> that is returned as a result of the delete. If the delete
  matches no rows in the database, <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> will be passed as the last
  argument to the trace building function.</p></div></div><div class="top"><p class="src"><a id="v:untracedTableDefinition" class="def">untracedTableDefinition</a> :: <a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a> trace key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity <a href="src/Orville.PostgreSQL.EntityTrace.html#untracedTableDefinition" class="link">Source</a> <a href="#v:untracedTableDefinition" class="selflink">#</a></p><div class="doc"><p>Returns the <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> underlying a <code><a href="Orville-PostgreSQL-EntityTrace.html#t:TracedTable" title="Orville.PostgreSQL.EntityTrace">TracedTable</a></code>. You can use this
  to get access to the table definiton to use the regular untraced Orville
  functions without having to keep a separate reference to the untraced table
  around.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.14.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a id="t:MonadEntityTrace" class="def">MonadEntityTrace</a> trace m | m -&gt; trace <span class="keyword">where</span> <a href="src/Orville.PostgreSQL.EntityTrace.html#MonadEntityTrace" class="link">Source</a> <a href="#t:MonadEntityTrace" class="selflink">#</a></p><div class="doc"><p><code><a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a></code> provides the interface used by functions such as
 <code><a href="Orville-PostgreSQL-EntityTrace.html#v:insertEntityTraced" title="Orville.PostgreSQL.EntityTrace">insertEntityTraced</a></code> to perform tracing as part of their operation. An
 instance for 'ReaderT EntityTraceState' is provided which can be used via
 <code><a href="Orville-PostgreSQL-EntityTrace.html#v:runEntityTraceT" title="Orville.PostgreSQL.EntityTrace">runEntityTraceT</a></code>.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:recordTraces" class="def">recordTraces</a> :: [trace] -&gt; m () <a href="src/Orville.PostgreSQL.EntityTrace.html#recordTraces" class="link">Source</a> <a href="#v:recordTraces" class="selflink">#</a></p><p class="src"><a id="v:liftOrvilleUntraced" class="def">liftOrvilleUntraced</a> :: (<span class="keyword">forall</span> n. <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> n =&gt; n a) -&gt; m a <a href="src/Orville.PostgreSQL.EntityTrace.html#liftOrvilleUntraced" class="link">Source</a> <a href="#v:liftOrvilleUntraced" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MonadEntityTrace">Instances</h4><details id="i:MonadEntityTrace" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadEntityTrace:MonadEntityTrace:1"></span> <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-EntityTrace.html#t:MonadEntityTrace" title="Orville.PostgreSQL.EntityTrace">MonadEntityTrace</a> trace (<a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m)</span> <a href="src/Orville.PostgreSQL.EntityTrace.html#line-571" class="link">Source</a> <a href="#t:MonadEntityTrace" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadEntityTrace:MonadEntityTrace:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-EntityTrace.html">Orville.PostgreSQL.EntityTrace</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:recordTraces">recordTraces</a> :: [trace] -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m () <a href="src/Orville.PostgreSQL.EntityTrace.html#recordTraces" class="link">Source</a> <a href="#v:recordTraces" class="selflink">#</a></p><p class="src"><a href="#v:liftOrvilleUntraced">liftOrvilleUntraced</a> :: (<span class="keyword">forall</span> (n :: <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> n =&gt; n a) -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> (<a href="Orville-PostgreSQL-EntityTrace.html#t:EntityTraceState" title="Orville.PostgreSQL.EntityTrace">EntityTraceState</a> trace) m a <a href="src/Orville.PostgreSQL.EntityTrace.html#liftOrvilleUntraced" class="link">Source</a> <a href="#v:liftOrvilleUntraced" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>