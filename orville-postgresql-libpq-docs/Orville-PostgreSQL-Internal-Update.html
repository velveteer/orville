<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Orville.PostgreSQL.Internal.Update</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">orville-postgresql-libpq-0.10.0.0: ORM</span><ul class="links" id="page-menu"><li><a href="src/Orville.PostgreSQL.Internal.Update.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Orville.PostgreSQL.Internal.Update</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Update">Update</a> readEntity returningClause</li><li class="src short"><a href="#v:updateToUpdateExpr">updateToUpdateExpr</a> :: <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause -&gt; <a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a></li><li class="src short"><a href="#v:executeUpdate">executeUpdate</a> :: <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause -&gt; m <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:executeUpdateReturnEntities">executeUpdateReturnEntities</a> :: <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a> -&gt; m [readEntity]</li><li class="src short"><a href="#v:updateToTableReturning">updateToTableReturning</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; key -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a>)</li><li class="src short"><a href="#v:updateToTable">updateToTable</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; key -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">NoReturningClause</a>)</li><li class="src short"><a href="#v:updateToTableFieldsReturning">updateToTableFieldsReturning</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Orville-PostgreSQL-Internal-Expr.html#t:SetClause" title="Orville.PostgreSQL.Internal.Expr">SetClause</a> -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-Internal-SelectOptions.html#t:WhereCondition" title="Orville.PostgreSQL.Internal.SelectOptions">WhereCondition</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a></li><li class="src short"><a href="#v:updateToTableFields">updateToTableFields</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Orville-PostgreSQL-Internal-Expr.html#t:SetClause" title="Orville.PostgreSQL.Internal.Expr">SetClause</a> -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-Internal-SelectOptions.html#t:WhereCondition" title="Orville.PostgreSQL.Internal.SelectOptions">WhereCondition</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">NoReturningClause</a></li><li class="src short"><a href="#v:rawUpdateExpr">rawUpdateExpr</a> :: <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningOption" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningOption</a> returningClause -&gt; <a href="Orville-PostgreSQL-Internal-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Internal.SqlMarshaller">AnnotatedSqlMarshaller</a> writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Update" class="def">Update</a> readEntity returningClause <a href="src/Orville.PostgreSQL.Internal.Update.html#Update" class="link">Source</a> <a href="#t:Update" class="selflink">#</a></p><div class="doc"><p>Represents an <code>UPDATE</code> statement that can be executed against a database. An <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> has a
  <code>SqlMarshaller</code> bound to it that, when the update returns data from the database, will be used to
  decode the database result set when it is executed.</p></div></div><div class="top"><p class="src"><a id="v:updateToUpdateExpr" class="def">updateToUpdateExpr</a> :: <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause -&gt; <a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a> <a href="src/Orville.PostgreSQL.Internal.Update.html#updateToUpdateExpr" class="link">Source</a> <a href="#v:updateToUpdateExpr" class="selflink">#</a></p><div class="doc"><p>Extracts the query that will be run when the update is executed. Normally you
  don't want to extract the query and run it yourself, but this function is
  useful to view the query for debugging or query explanation.</p></div></div><div class="top"><p class="src"><a id="v:executeUpdate" class="def">executeUpdate</a> :: <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause -&gt; m <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Orville.PostgreSQL.Internal.Update.html#executeUpdate" class="link">Source</a> <a href="#v:executeUpdate" class="selflink">#</a></p><div class="doc"><p>Executes the database query for the <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> and returns the number of
  affected rows</p></div></div><div class="top"><p class="src"><a id="v:executeUpdateReturnEntities" class="def">executeUpdateReturnEntities</a> :: <a href="Orville-PostgreSQL.html#t:MonadOrville" title="Orville.PostgreSQL">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a> -&gt; m [readEntity] <a href="src/Orville.PostgreSQL.Internal.Update.html#executeUpdateReturnEntities" class="link">Source</a> <a href="#v:executeUpdateReturnEntities" class="selflink">#</a></p><div class="doc"><p>Executes the database query for the <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> and uses its
  <code><a href="Orville-PostgreSQL-Internal-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Internal.SqlMarshaller">AnnotatedSqlMarshaller</a></code> to decode any rows that were just updated, as
  returned via a RETURNING clause.</p></div></div><div class="top"><p class="src"><a id="v:updateToTableReturning" class="def">updateToTableReturning</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; key -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a>) <a href="src/Orville.PostgreSQL.Internal.Update.html#updateToTableReturning" class="link">Source</a> <a href="#v:updateToTableReturning" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> that will update all of the writable columns described in
  the <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> and returning the data as seen by the database. This is
  useful for getting database managed columns such as auto-incrementing
  identifiers and sequences.</p><p>This function returns <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> has no columns,
  which would otherwise generate and <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> with invalid SQL syntax.</p></div></div><div class="top"><p class="src"><a id="v:updateToTable" class="def">updateToTable</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> (<a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:HasKey" title="Orville.PostgreSQL.Internal.TableDefinition">HasKey</a> key) writeEntity readEntity -&gt; key -&gt; writeEntity -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">NoReturningClause</a>) <a href="src/Orville.PostgreSQL.Internal.Update.html#updateToTable" class="link">Source</a> <a href="#v:updateToTable" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> that will update all of the writable columns described in
  the <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> without returning the data as seen by the database.</p><p>This function returns <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the <code><a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a></code> has no columns,
  which would otherwise generate and <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> with invalid SQL syntax.</p></div></div><div class="top"><p class="src"><a id="v:updateToTableFieldsReturning" class="def">updateToTableFieldsReturning</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Orville-PostgreSQL-Internal-Expr.html#t:SetClause" title="Orville.PostgreSQL.Internal.Expr">SetClause</a> -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-Internal-SelectOptions.html#t:WhereCondition" title="Orville.PostgreSQL.Internal.SelectOptions">WhereCondition</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningClause</a> <a href="src/Orville.PostgreSQL.Internal.Update.html#updateToTableFieldsReturning" class="link">Source</a> <a href="#v:updateToTableFieldsReturning" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> that will apply the specified column set clauses to rows
  the specified table and return the updated version of any rows affected by
  the update state by using a <code>RETURNING</code> clause.</p></div></div><div class="top"><p class="src"><a id="v:updateToTableFields" class="def">updateToTableFields</a> :: <a href="Orville-PostgreSQL-Internal-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Internal.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Orville-PostgreSQL-Internal-Expr.html#t:SetClause" title="Orville.PostgreSQL.Internal.Expr">SetClause</a> -&gt; <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-Internal-SelectOptions.html#t:WhereCondition" title="Orville.PostgreSQL.Internal.SelectOptions">WhereCondition</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Internal.ReturningOption">NoReturningClause</a> <a href="src/Orville.PostgreSQL.Internal.Update.html#updateToTableFields" class="link">Source</a> <a href="#v:updateToTableFields" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> that will apply the specified column set clauses to rows
  the specified table without returning the data as seen by the database.</p></div></div><div class="top"><p class="src"><a id="v:rawUpdateExpr" class="def">rawUpdateExpr</a> :: <a href="Orville-PostgreSQL-Internal-ReturningOption.html#t:ReturningOption" title="Orville.PostgreSQL.Internal.ReturningOption">ReturningOption</a> returningClause -&gt; <a href="Orville-PostgreSQL-Internal-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Internal.SqlMarshaller">AnnotatedSqlMarshaller</a> writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a> -&gt; <a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a> readEntity returningClause <a href="src/Orville.PostgreSQL.Internal.Update.html#rawUpdateExpr" class="link">Source</a> <a href="#v:rawUpdateExpr" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code> that will execute the specified query and use the given <code><a href="Orville-PostgreSQL-Internal-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Internal.SqlMarshaller">AnnotatedSqlMarshaller</a></code> to
  decode it. It is up to the caller to ensure that the given <code><a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a></code> makes sense and
  produces a value that can be stored, as well as returning a result that the <code><a href="Orville-PostgreSQL-Internal-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Internal.SqlMarshaller">AnnotatedSqlMarshaller</a></code> can
  decode.</p><p>This is the lowest level of escape hatch available for <code><a href="Orville-PostgreSQL-Internal-Update.html#t:Update" title="Orville.PostgreSQL.Internal.Update">Update</a></code>. The caller can build any query
  that Orville supports using the expression building functions, or use <code>RawSql.fromRawSql</code> to build
  a raw <code><a href="Orville-PostgreSQL-Internal-Expr.html#t:UpdateExpr" title="Orville.PostgreSQL.Internal.Expr">UpdateExpr</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>