<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Orville.PostgreSQL.Internal.Orville</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#Orville"><span class="hs-identifier">Orville</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#runOrville"><span class="hs-identifier">runOrville</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#runOrvilleWithState"><span class="hs-identifier">runOrvilleWithState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">where</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception.Safe</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ExSafe</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ReaderT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runReaderT</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Pool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Pool</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html"><span class="hs-identifier">Orville.PostgreSQL.Connection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier">Connection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.ErrorDetailLevel.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.ErrorDetailLevel</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ErrorDetailLevel</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.MonadOrville.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.MonadOrville</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MonadOrville</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.OrvilleState.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.OrvilleState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OrvilleState</span></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-comment">{- |
  The 'Orville' Monad provides a easy starter implementation of 'MonadOrville'
  when you don't have a monad specific to your application that you need to
  use.

  If you want add Orville capabilities to your own monad, take a look at
  'MonadOrville' to learn what needs to be done.
-}</span><span>
</span><span id="line-28"></span><span class="hs-keyword">newtype</span><span> </span><span id="Orville"><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#Orville"><span class="hs-identifier hs-var">Orville</span></a></span></span><span> </span><span id="local-6989586621679117851"><span class="annot"><a href="#local-6989586621679117851"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Orville"><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#Orville"><span class="hs-identifier hs-var">Orville</span></a></span></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unwrapOrville"><span class="annot"><span class="annottext">Orville a -&gt; ReaderT OrvilleState IO a
</span><a href="Orville.PostgreSQL.Internal.Orville.html#unwrapOrville"><span class="hs-identifier hs-var hs-var">unwrapOrville</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.OrvilleState.html#OrvilleState"><span class="hs-identifier hs-type">OrvilleState.OrvilleState</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679117851"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679117842"><span id="local-6989586621679117844"><span class="annot"><span class="annottext">a -&gt; Orville b -&gt; Orville a
(a -&gt; b) -&gt; Orville a -&gt; Orville b
(forall a b. (a -&gt; b) -&gt; Orville a -&gt; Orville b)
-&gt; (forall a b. a -&gt; Orville b -&gt; Orville a) -&gt; Functor Orville
forall a b. a -&gt; Orville b -&gt; Orville a
forall a b. (a -&gt; b) -&gt; Orville a -&gt; Orville b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; Orville b -&gt; Orville a
$c&lt;$ :: forall a b. a -&gt; Orville b -&gt; Orville a
fmap :: (a -&gt; b) -&gt; Orville a -&gt; Orville b
$cfmap :: forall a b. (a -&gt; b) -&gt; Orville a -&gt; Orville b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117830"><span id="local-6989586621679117832"><span id="local-6989586621679117834"><span id="local-6989586621679117836"><span id="local-6989586621679117838"><span class="annot"><span class="annottext">Functor Orville
a -&gt; Orville a
Functor Orville
-&gt; (forall a. a -&gt; Orville a)
-&gt; (forall a b. Orville (a -&gt; b) -&gt; Orville a -&gt; Orville b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; Orville a -&gt; Orville b -&gt; Orville c)
-&gt; (forall a b. Orville a -&gt; Orville b -&gt; Orville b)
-&gt; (forall a b. Orville a -&gt; Orville b -&gt; Orville a)
-&gt; Applicative Orville
Orville a -&gt; Orville b -&gt; Orville b
Orville a -&gt; Orville b -&gt; Orville a
Orville (a -&gt; b) -&gt; Orville a -&gt; Orville b
(a -&gt; b -&gt; c) -&gt; Orville a -&gt; Orville b -&gt; Orville c
forall a. a -&gt; Orville a
forall a b. Orville a -&gt; Orville b -&gt; Orville a
forall a b. Orville a -&gt; Orville b -&gt; Orville b
forall a b. Orville (a -&gt; b) -&gt; Orville a -&gt; Orville b
forall a b c. (a -&gt; b -&gt; c) -&gt; Orville a -&gt; Orville b -&gt; Orville c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: Orville a -&gt; Orville b -&gt; Orville a
$c&lt;* :: forall a b. Orville a -&gt; Orville b -&gt; Orville a
*&gt; :: Orville a -&gt; Orville b -&gt; Orville b
$c*&gt; :: forall a b. Orville a -&gt; Orville b -&gt; Orville b
liftA2 :: (a -&gt; b -&gt; c) -&gt; Orville a -&gt; Orville b -&gt; Orville c
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; Orville a -&gt; Orville b -&gt; Orville c
&lt;*&gt; :: Orville (a -&gt; b) -&gt; Orville a -&gt; Orville b
$c&lt;*&gt; :: forall a b. Orville (a -&gt; b) -&gt; Orville a -&gt; Orville b
pure :: a -&gt; Orville a
$cpure :: forall a. a -&gt; Orville a
$cp1Applicative :: Functor Orville
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117822"><span id="local-6989586621679117824"><span id="local-6989586621679117826"><span class="annot"><span class="annottext">Applicative Orville
a -&gt; Orville a
Applicative Orville
-&gt; (forall a b. Orville a -&gt; (a -&gt; Orville b) -&gt; Orville b)
-&gt; (forall a b. Orville a -&gt; Orville b -&gt; Orville b)
-&gt; (forall a. a -&gt; Orville a)
-&gt; Monad Orville
Orville a -&gt; (a -&gt; Orville b) -&gt; Orville b
Orville a -&gt; Orville b -&gt; Orville b
forall a. a -&gt; Orville a
forall a b. Orville a -&gt; Orville b -&gt; Orville b
forall a b. Orville a -&gt; (a -&gt; Orville b) -&gt; Orville b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; Orville a
$creturn :: forall a. a -&gt; Orville a
&gt;&gt; :: Orville a -&gt; Orville b -&gt; Orville b
$c&gt;&gt; :: forall a b. Orville a -&gt; Orville b -&gt; Orville b
&gt;&gt;= :: Orville a -&gt; (a -&gt; Orville b) -&gt; Orville b
$c&gt;&gt;= :: forall a b. Orville a -&gt; (a -&gt; Orville b) -&gt; Orville b
$cp1Monad :: Applicative Orville
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117818"><span class="annot"><span class="annottext">Monad Orville
Monad Orville -&gt; (forall a. IO a -&gt; Orville a) -&gt; MonadIO Orville
IO a -&gt; Orville a
forall a. IO a -&gt; Orville a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. IO a -&gt; m a) -&gt; MonadIO m
liftIO :: IO a -&gt; Orville a
$cliftIO :: forall a. IO a -&gt; Orville a
$cp1MonadIO :: Monad Orville
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117811"><span id="local-6989586621679117813"><span id="local-6989586621679117815"><span class="annot"><span class="annottext">(IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
-&gt; Orville a -&gt; (a -&gt; Orville b) -&gt; (a -&gt; Orville c) -&gt; Orville c
(forall a. (Connection -&gt; IO a) -&gt; IO a)
-&gt; (Connection -&gt; Orville b) -&gt; Orville b
(forall b.
 (forall a. (Connection -&gt; IO a) -&gt; IO a)
 -&gt; (Connection -&gt; Orville b) -&gt; Orville b)
-&gt; (forall c d.
    (forall a b. IO a -&gt; IO b -&gt; IO a)
    -&gt; Orville c -&gt; Orville d -&gt; Orville c)
-&gt; (forall a b c.
    (IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
    -&gt; Orville a -&gt; (a -&gt; Orville b) -&gt; (a -&gt; Orville c) -&gt; Orville c)
-&gt; MonadOrvilleControl Orville
(forall a b. IO a -&gt; IO b -&gt; IO a)
-&gt; Orville c -&gt; Orville d -&gt; Orville c
forall b.
(forall a. (Connection -&gt; IO a) -&gt; IO a)
-&gt; (Connection -&gt; Orville b) -&gt; Orville b
forall c d.
(forall a b. IO a -&gt; IO b -&gt; IO a)
-&gt; Orville c -&gt; Orville d -&gt; Orville c
forall a b c.
(IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
-&gt; Orville a -&gt; (a -&gt; Orville b) -&gt; (a -&gt; Orville c) -&gt; Orville c
forall (m :: * -&gt; *).
(forall b.
 (forall a. (Connection -&gt; IO a) -&gt; IO a)
 -&gt; (Connection -&gt; m b) -&gt; m b)
-&gt; (forall c d.
    (forall a b. IO a -&gt; IO b -&gt; IO a) -&gt; m c -&gt; m d -&gt; m c)
-&gt; (forall a b c.
    (IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
    -&gt; m a -&gt; (a -&gt; m b) -&gt; (a -&gt; m c) -&gt; m c)
-&gt; MonadOrvilleControl m
liftBracket :: (IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
-&gt; Orville a -&gt; (a -&gt; Orville b) -&gt; (a -&gt; Orville c) -&gt; Orville c
$cliftBracket :: forall a b c.
(IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c)
-&gt; Orville a -&gt; (a -&gt; Orville b) -&gt; (a -&gt; Orville c) -&gt; Orville c
liftFinally :: (forall a b. IO a -&gt; IO b -&gt; IO a)
-&gt; Orville c -&gt; Orville d -&gt; Orville c
$cliftFinally :: forall c d.
(forall a b. IO a -&gt; IO b -&gt; IO a)
-&gt; Orville c -&gt; Orville d -&gt; Orville c
liftWithConnection :: (forall a. (Connection -&gt; IO a) -&gt; IO a)
-&gt; (Connection -&gt; Orville b) -&gt; Orville b
$cliftWithConnection :: forall b.
(forall a. (Connection -&gt; IO a) -&gt; IO a)
-&gt; (Connection -&gt; Orville b) -&gt; Orville b
</span><a href="Orville.PostgreSQL.Internal.MonadOrville.html#C%3AMonadOrvilleControl"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadOrville.MonadOrvilleControl</span></a></span></span></span></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MonadIO Orville
HasOrvilleState Orville
MonadOrvilleControl Orville
HasOrvilleState Orville
-&gt; MonadOrvilleControl Orville
-&gt; MonadIO Orville
-&gt; MonadOrville Orville
forall (m :: * -&gt; *).
HasOrvilleState m
-&gt; MonadOrvilleControl m -&gt; MonadIO m -&gt; MonadOrville m
$cp3MonadOrville :: MonadIO Orville
$cp2MonadOrville :: MonadOrvilleControl Orville
$cp1MonadOrville :: HasOrvilleState Orville
</span><a href="Orville.PostgreSQL.Internal.MonadOrville.html#C%3AMonadOrville"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadOrville.MonadOrville</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117802"><span id="local-6989586621679117804"><span class="annot"><span class="annottext">Orville OrvilleState
Orville OrvilleState
-&gt; (forall a.
    (OrvilleState -&gt; OrvilleState) -&gt; Orville a -&gt; Orville a)
-&gt; HasOrvilleState Orville
(OrvilleState -&gt; OrvilleState) -&gt; Orville a -&gt; Orville a
forall a. (OrvilleState -&gt; OrvilleState) -&gt; Orville a -&gt; Orville a
forall (m :: * -&gt; *).
m OrvilleState
-&gt; (forall a. (OrvilleState -&gt; OrvilleState) -&gt; m a -&gt; m a)
-&gt; HasOrvilleState m
localOrvilleState :: (OrvilleState -&gt; OrvilleState) -&gt; Orville a -&gt; Orville a
$clocalOrvilleState :: forall a. (OrvilleState -&gt; OrvilleState) -&gt; Orville a -&gt; Orville a
askOrvilleState :: Orville OrvilleState
$caskOrvilleState :: Orville OrvilleState
</span><a href="Orville.PostgreSQL.Internal.OrvilleState.html#C%3AHasOrvilleState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">OrvilleState.HasOrvilleState</span></a></span></span></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117798"><span class="annot"><span class="annottext">Monad Orville
e -&gt; Orville a
Monad Orville
-&gt; (forall e a. Exception e =&gt; e -&gt; Orville a)
-&gt; MonadThrow Orville
forall e a. Exception e =&gt; e -&gt; Orville a
forall (m :: * -&gt; *).
Monad m -&gt; (forall e a. Exception e =&gt; e -&gt; m a) -&gt; MonadThrow m
throwM :: e -&gt; Orville a
$cthrowM :: forall e a. Exception e =&gt; e -&gt; Orville a
$cp1MonadThrow :: Monad Orville
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">ExSafe.MonadThrow</span></span></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679117794"><span class="annot"><span class="annottext">MonadThrow Orville
MonadThrow Orville
-&gt; (forall e a.
    Exception e =&gt;
    Orville a -&gt; (e -&gt; Orville a) -&gt; Orville a)
-&gt; MonadCatch Orville
Orville a -&gt; (e -&gt; Orville a) -&gt; Orville a
forall e a.
Exception e =&gt;
Orville a -&gt; (e -&gt; Orville a) -&gt; Orville a
forall (m :: * -&gt; *).
MonadThrow m
-&gt; (forall e a. Exception e =&gt; m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
catch :: Orville a -&gt; (e -&gt; Orville a) -&gt; Orville a
$ccatch :: forall e a.
Exception e =&gt;
Orville a -&gt; (e -&gt; Orville a) -&gt; Orville a
$cp1MonadCatch :: MonadThrow Orville
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">ExSafe.MonadCatch</span></span></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">{- |
  Runs an 'Orville' operation in the 'IO' monad using the given connection
  pool.

  This will run the 'Orville' operation with the 'ErrorDetailLevel' set to the
  default. If want to run with a different detail level, you can use
  'OrvilleState.newOrvilleState' to create a state with the desired detail
  level and then use 'runOrvilleWithState'.
-}</span><span>
</span><span id="line-52"></span><span id="local-6989586621679117792"><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#runOrville"><span class="hs-identifier hs-type">runOrville</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pool</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#Orville"><span class="hs-identifier hs-type">Orville</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679117792"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679117792"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-53"></span><span id="runOrville"><span class="annot"><span class="annottext">runOrville :: Pool Connection -&gt; Orville a -&gt; IO a
</span><a href="Orville.PostgreSQL.Internal.Orville.html#runOrville"><span class="hs-identifier hs-var hs-var">runOrville</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><span class="annottext">OrvilleState -&gt; Orville a -&gt; IO a
forall a. OrvilleState -&gt; Orville a -&gt; IO a
</span><a href="Orville.PostgreSQL.Internal.Orville.html#runOrvilleWithState"><span class="hs-identifier hs-var">runOrvilleWithState</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="annottext">(OrvilleState -&gt; Orville a -&gt; IO a)
-&gt; (Pool Connection -&gt; OrvilleState)
-&gt; Pool Connection
-&gt; Orville a
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ErrorDetailLevel -&gt; Pool Connection -&gt; OrvilleState
</span><a href="Orville.PostgreSQL.Internal.OrvilleState.html#newOrvilleState"><span class="hs-identifier hs-var">OrvilleState.newOrvilleState</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorDetailLevel
</span><a href="Orville.PostgreSQL.Internal.ErrorDetailLevel.html#defaultErrorDetailLevel"><span class="hs-identifier hs-var">ErrorDetailLevel.defaultErrorDetailLevel</span></a></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">{- |
  Runs an 'Orville' operation in the 'IO' monad, starting from the provided
  'OrvilleState'.

  Caution: If you harvest an 'OrvilleState' from inside a
  'MonadOrville.MonadOrville' monad using 'MonadOrville.askOrvilleState',
  you may pick up connection tracking state that you didn't intend to. You
  may want to use 'MonadOrville.resetOrvilleState' in this situation to get
  a new initial state before passing it to 'runOrvilleWithState'.

  On the other hand, if you know that you want to pass the existing connection
  state from another monad into the 'Orville' monad, this is how you do it.
-}</span><span>
</span><span id="line-70"></span><span id="local-6989586621679117860"><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#runOrvilleWithState"><span class="hs-identifier hs-type">runOrvilleWithState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.OrvilleState.html#OrvilleState"><span class="hs-identifier hs-type">OrvilleState.OrvilleState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Orville.html#Orville"><span class="hs-identifier hs-type">Orville</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679117860"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679117860"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-71"></span><span id="runOrvilleWithState"><span class="annot"><span class="annottext">runOrvilleWithState :: OrvilleState -&gt; Orville a -&gt; IO a
</span><a href="Orville.PostgreSQL.Internal.Orville.html#runOrvilleWithState"><span class="hs-identifier hs-var hs-var">runOrvilleWithState</span></a></span></span><span> </span><span id="local-6989586621679117788"><span class="annot"><span class="annottext">OrvilleState
</span><a href="#local-6989586621679117788"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679117787"><span class="annot"><span class="annottext">Orville a
</span><a href="#local-6989586621679117787"><span class="hs-identifier hs-var">orville</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="annottext">ReaderT OrvilleState IO a -&gt; OrvilleState -&gt; IO a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var hs-var">runReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Orville a -&gt; ReaderT OrvilleState IO a
forall a. Orville a -&gt; ReaderT OrvilleState IO a
</span><a href="Orville.PostgreSQL.Internal.Orville.html#unwrapOrville"><span class="hs-identifier hs-var hs-var">unwrapOrville</span></a></span><span> </span><span class="annot"><span class="annottext">Orville a
</span><a href="#local-6989586621679117787"><span class="hs-identifier hs-var">orville</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OrvilleState
</span><a href="#local-6989586621679117788"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-73"></span></pre></body></html>