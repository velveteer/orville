<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{- |

Module    : Orville.PostgreSQL.Internal.RawSql
Copyright : Flipstone Technology Partners 2016-2021
License   : MIT

The funtions in this module are named with the intent that it is imported
qualified as 'RawSql'.
-}</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Orville.PostgreSQL.Internal.RawSql</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier">RawSql</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#parameter"><span class="hs-identifier">parameter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier">fromString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromText"><span class="hs-identifier">fromText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromBytes"><span class="hs-identifier">fromBytes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#intercalate"><span class="hs-identifier">intercalate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#execute"><span class="hs-identifier">execute</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#executeVoid"><span class="hs-identifier">executeVoid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#connectionEscaping"><span class="hs-identifier">connectionEscaping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Fragments provided for convenience</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#space"><span class="hs-identifier">space</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#comma"><span class="hs-identifier">comma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#commaSpace"><span class="hs-identifier">commaSpace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#leftParen"><span class="hs-identifier">leftParen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#rightParen"><span class="hs-identifier">rightParen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#dot"><span class="hs-identifier">dot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleQuote"><span class="hs-identifier">doubleQuote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleColon"><span class="hs-identifier">doubleColon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#stringLiteral"><span class="hs-identifier">stringLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Integer values as literals</span></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#intDecLiteral"><span class="hs-identifier">intDecLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int8DecLiteral"><span class="hs-identifier">int8DecLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int16DecLiteral"><span class="hs-identifier">int16DecLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int32DecLiteral"><span class="hs-identifier">int32DecLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int64DecLiteral"><span class="hs-identifier">int64DecLiteral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generic interface for generating sql</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier">SqlExpression</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toRawSql"><span class="hs-identifier">toRawSql</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#unsafeFromRawSql"><span class="hs-identifier">unsafeFromRawSql</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toBytesAndParams"><span class="hs-identifier">toBytesAndParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toExampleBytes"><span class="hs-identifier">toExampleBytes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier">Escaping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier">Escaping</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#escapeStringLiteral"><span class="hs-identifier">escapeStringLiteral</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscaping"><span class="hs-identifier">exampleEscaping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">void</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSB</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B8</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.DList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DList</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.DList</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DList</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fold</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Identity</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runIdentity</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Int</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TextEnc</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Database.PostgreSQL.LibPQ</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LibPQ</span></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html"><span class="hs-identifier">Orville.PostgreSQL.Connection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier">Connection</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html"><span class="hs-identifier">Orville.PostgreSQL.Connection</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Conn</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.PgTextFormatValue.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.PgTextFormatValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.PgTextFormatValue.html#PgTextFormatValue"><span class="hs-identifier">PgTextFormatValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SqlValue.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.SqlValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.SqlValue.html#SqlValue"><span class="hs-identifier">SqlValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SqlValue.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.SqlValue</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SqlValue</span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">{- |
  'RawSql' provides a type for efficiently constructing raw sql statements
  from smaller parts and then executing them. It also supports using placeholder
  values to pass parameters with a query without having to interpolate them
  as part of the actual sql state and being exposed to sql injection.
-}</span><span>
</span><span id="line-75"></span><span class="hs-keyword">data</span><span> </span><span id="RawSql"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-var">RawSql</span></a></span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SqlSection"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BSB.Builder</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Parameter"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Parameter"><span class="hs-identifier hs-var">Parameter</span></a></span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="StringLiteral"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#StringLiteral"><span class="hs-identifier hs-var">StringLiteral</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Append"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Append"><span class="hs-identifier hs-var">Append</span></a></span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115057"><span id="local-6989586621679115059"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-type">SqlSection</span></a></span><span> </span><span id="local-6989586621679115055"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115055"><span class="hs-identifier hs-var">builderA</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115054"><span class="annot"><span class="annottext">&lt;&gt; :: RawSql -&gt; RawSql -&gt; RawSql
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-type">SqlSection</span></a></span><span> </span><span id="local-6989586621679115053"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115053"><span class="hs-identifier hs-var">builderB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115055"><span class="hs-identifier hs-var">builderA</span></a></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115053"><span class="hs-identifier hs-var">builderB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span id="local-6989586621679115052"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115052"><span class="hs-identifier hs-var">otherA</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span id="local-6989586621679115051"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115051"><span class="hs-identifier hs-var">otherB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="annottext">RawSql -&gt; RawSql -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#Append"><span class="hs-identifier hs-var">Append</span></a></span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115052"><span class="hs-identifier hs-var">otherA</span></a></span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115051"><span class="hs-identifier hs-var">otherB</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679115045"><span id="local-6989586621679115047"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-88"></span><span>  </span><span id="local-6989586621679115043"><span class="annot"><span class="annottext">mempty :: RawSql
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">Builder
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">class</span><span> </span><span id="SqlExpression"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-var">SqlExpression</span></a></span></span><span> </span><span id="local-6989586621679115152"><span class="annot"><a href="#local-6989586621679115152"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-91"></span><span>  </span><span id="toRawSql"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toRawSql"><span class="hs-identifier hs-type">toRawSql</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679115152"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span id="unsafeFromRawSql"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#unsafeFromRawSql"><span class="hs-identifier hs-type">unsafeFromRawSql</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115152"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span id="local-6989586621679115039"><span class="annot"><span class="annottext">toRawSql :: RawSql -&gt; RawSql
</span><a href="#local-6989586621679115039"><span class="hs-identifier hs-var hs-var hs-var hs-var">toRawSql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawSql -&gt; RawSql
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-96"></span><span>  </span><span id="local-6989586621679115037"><span class="annot"><span class="annottext">unsafeFromRawSql :: RawSql -&gt; RawSql
</span><a href="#local-6989586621679115037"><span class="hs-identifier hs-var hs-var hs-var hs-var">unsafeFromRawSql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawSql -&gt; RawSql
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">{- |
  Provides procedures for escaping parts of a raw SQL query so that they
  can be safely executed. Escaping may be done in some 'Monad' m, allowing
  for the use of escaping operations provided by 'Connection', which operate
  in the 'IO' monad.

  See 'connectionEscaping' and 'exampleEscaping'.
-}</span><span>
</span><span id="line-106"></span><span class="hs-keyword">data</span><span> </span><span id="Escaping"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-var">Escaping</span></a></span></span><span> </span><span id="local-6989586621679115146"><span class="annot"><a href="#local-6989586621679115146"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Escaping"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-var">Escaping</span></a></span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="escapeStringLiteral"><span class="annot"><span class="annottext">Escaping m -&gt; ByteString -&gt; m ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#escapeStringLiteral"><span class="hs-identifier hs-var hs-var">escapeStringLiteral</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115146"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">{- |
  Escaping done in pure Haskell that is suitable for showing SQL examples,
  but is not guaranteed to be sufficient for all database connections. For
  escaping that is based on the actual connection to the database, see
  'connectionEscaping'.
-}</span><span>
</span><span id="line-116"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscaping"><span class="hs-identifier hs-type">exampleEscaping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span>
</span><span id="line-117"></span><span id="exampleEscaping"><span class="annot"><span class="annottext">exampleEscaping :: Escaping Identity
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscaping"><span class="hs-identifier hs-var hs-var">exampleEscaping</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><span class="annottext">Escaping :: forall (m :: * -&gt; *). (ByteString -&gt; m ByteString) -&gt; Escaping m
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">escapeStringLiteral :: ByteString -&gt; Identity ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#escapeStringLiteral"><span class="hs-identifier hs-var">escapeStringLiteral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Identity ByteString
forall a. a -&gt; Identity a
</span><span class="hs-identifier hs-var">Identity</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Identity ByteString)
-&gt; (ByteString -&gt; ByteString) -&gt; ByteString -&gt; Identity ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscapeStringLiteral"><span class="hs-identifier hs-var">exampleEscapeStringLiteral</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscapeStringLiteral"><span class="hs-identifier hs-type">exampleEscapeStringLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-123"></span><span id="exampleEscapeStringLiteral"><span class="annot"><span class="annottext">exampleEscapeStringLiteral :: ByteString -&gt; ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscapeStringLiteral"><span class="hs-identifier hs-var hs-var">exampleEscapeStringLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="annottext">(Either (Char, ByteString) ByteString
 -&gt; Maybe (Char, Either (Char, ByteString) ByteString))
-&gt; Either (Char, ByteString) ByteString -&gt; ByteString
forall a. (a -&gt; Maybe (Char, a)) -&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">B8.unfoldr</span></span><span> </span><span class="annot"><span class="annottext">Either (Char, ByteString) ByteString
-&gt; Maybe (Char, Either (Char, ByteString) ByteString)
</span><a href="#local-6989586621679115033"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (Char, ByteString) ByteString -&gt; ByteString)
-&gt; (ByteString -&gt; Either (Char, ByteString) ByteString)
-&gt; ByteString
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either (Char, ByteString) ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>    </span><span id="local-6989586621679115033"><span class="annot"><span class="annottext">escape :: Either (Char, ByteString) ByteString
-&gt; Maybe (Char, Either (Char, ByteString) ByteString)
</span><a href="#local-6989586621679115033"><span class="hs-identifier hs-var hs-var">escape</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679115032"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115032"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-127"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe (Char, ByteString)
</span><span class="hs-identifier hs-var">B8.uncons</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115032"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Char, ByteString)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-129"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Char, Either (Char, ByteString) ByteString)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115030"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115030"><span class="hs-identifier hs-var">char</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115029"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115029"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-131"></span><span>          </span><span class="annot"><span class="annottext">(Char, Either (Char, ByteString) ByteString)
-&gt; Maybe (Char, Either (Char, ByteString) ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Char, Either (Char, ByteString) ByteString)
 -&gt; Maybe (Char, Either (Char, ByteString) ByteString))
-&gt; (Char, Either (Char, ByteString) ByteString)
-&gt; Maybe (Char, Either (Char, ByteString) ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-132"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#isEscapedChar"><span class="hs-identifier hs-var">isEscapedChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115030"><span class="hs-identifier hs-var">char</span></a></span><span>
</span><span id="line-133"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Char, ByteString) -&gt; Either (Char, ByteString) ByteString
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115030"><span class="hs-identifier hs-var">char</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115029"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115030"><span class="hs-identifier hs-var">char</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either (Char, ByteString) ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115029"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="#local-6989586621679115033"><span class="hs-identifier hs-var">escape</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679115027"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115027"><span class="hs-identifier hs-var">char</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115026"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115026"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">(Char, Either (Char, ByteString) ByteString)
-&gt; Maybe (Char, Either (Char, ByteString) ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115027"><span class="hs-identifier hs-var">char</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either (Char, ByteString) ByteString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679115026"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#isEscapedChar"><span class="hs-identifier hs-type">isEscapedChar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-139"></span><span id="isEscapedChar"><span class="annot"><span class="annottext">isEscapedChar :: Char -&gt; Bool
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#isEscapedChar"><span class="hs-identifier hs-var hs-var">isEscapedChar</span></a></span></span><span> </span><span id="local-6989586621679115025"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115025"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679115025"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-comment">{- |
  Escaping done in IO based using the escaping functions provided by the
  connection, which can apply escaping based on the specific connection
  properties.

  If you don't have a connection available and are only planning on using
  the SQL for explanatory or example purposes, see 'exampleEscaping'.
-}</span><span>
</span><span id="line-153"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#connectionEscaping"><span class="hs-identifier hs-type">connectionEscaping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span>
</span><span id="line-154"></span><span id="connectionEscaping"><span class="annot"><span class="annottext">connectionEscaping :: Connection -&gt; Escaping IO
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#connectionEscaping"><span class="hs-identifier hs-var hs-var">connectionEscaping</span></a></span></span><span> </span><span id="local-6989586621679115024"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679115024"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="annottext">Escaping :: forall (m :: * -&gt; *). (ByteString -&gt; m ByteString) -&gt; Escaping m
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">escapeStringLiteral :: ByteString -&gt; IO ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#escapeStringLiteral"><span class="hs-identifier hs-var">escapeStringLiteral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Connection -&gt; ByteString -&gt; IO ByteString
</span><a href="Orville.PostgreSQL.Connection.html#escapeStringLiteral"><span class="hs-identifier hs-var">Conn.escapeStringLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679115024"><span class="hs-identifier hs-var">connection</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">{- |
  Constructs the actual SQL bytestring and parameter values that will be
  passed to the database to execute a 'RawSql' query. Any string
  literals thar are included in the SQL expression will be escaping
  using the given escaping directive.
-}</span><span>
</span><span id="line-165"></span><span id="local-6989586621679115118"><span id="local-6989586621679115119"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toBytesAndParams"><span class="hs-identifier hs-type">toBytesAndParams</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115119"><span class="hs-identifier hs-type">sql</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679115118"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115118"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="#local-6989586621679115119"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="#local-6989586621679115118"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.PgTextFormatValue.html#PgTextFormatValue"><span class="hs-identifier hs-type">PgTextFormatValue</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-170"></span><span id="toBytesAndParams"><span class="annot"><span class="annottext">toBytesAndParams :: Escaping m -&gt; sql -&gt; m (ByteString, [Maybe PgTextFormatValue])
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toBytesAndParams"><span class="hs-identifier hs-var hs-var">toBytesAndParams</span></a></span></span><span> </span><span id="local-6989586621679115022"><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115022"><span class="hs-identifier hs-var">escaping</span></a></span></span><span> </span><span id="local-6989586621679115021"><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679115021"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679115020"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115020"><span class="hs-identifier hs-var">byteBuilder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679115019"><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115019"><span class="hs-identifier hs-var">finalProgress</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="annottext">Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
forall (m :: * -&gt; *).
Monad m =&gt;
Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#buildSqlWithProgress"><span class="hs-identifier hs-var">buildSqlWithProgress</span></a></span><span> </span><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115022"><span class="hs-identifier hs-var">escaping</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#startingProgress"><span class="hs-identifier hs-var">startingProgress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">sql -&gt; RawSql
forall a. SqlExpression a =&gt; a -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toRawSql"><span class="hs-identifier hs-var">toRawSql</span></a></span><span> </span><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679115021"><span class="hs-identifier hs-var">sql</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><span class="annottext">(ByteString, [Maybe PgTextFormatValue])
-&gt; m (ByteString, [Maybe PgTextFormatValue])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">LBS.toStrict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><span class="hs-identifier hs-var">BSB.toLazyByteString</span></span><span> </span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679115020"><span class="hs-identifier hs-var">byteBuilder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DList (Maybe PgTextFormatValue) -&gt; [Maybe PgTextFormatValue]
forall a. DList a -&gt; [a]
</span><span class="hs-identifier hs-var">DList.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParamsProgress -&gt; DList (Maybe PgTextFormatValue)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramValues"><span class="hs-identifier hs-var hs-var">paramValues</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115019"><span class="hs-identifier hs-var">finalProgress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">{- |
  Builds the bytes that represent the raw sql. These bytes may not be executable
  on their own, because they may contain placeholders that must be filled in,
  but can be useful for inspecting sql queries.
-}</span><span>
</span><span id="line-183"></span><span id="local-6989586621679115012"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#toExampleBytes"><span class="hs-identifier hs-type">toExampleBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115012"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115012"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span></span><span>
</span><span id="line-184"></span><span id="toExampleBytes"><span class="annot"><span class="annottext">toExampleBytes :: sql -&gt; ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toExampleBytes"><span class="hs-identifier hs-var hs-var">toExampleBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><span class="annottext">(ByteString, [Maybe PgTextFormatValue]) -&gt; ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((ByteString, [Maybe PgTextFormatValue]) -&gt; ByteString)
-&gt; (sql -&gt; (ByteString, [Maybe PgTextFormatValue]))
-&gt; sql
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Identity (ByteString, [Maybe PgTextFormatValue])
-&gt; (ByteString, [Maybe PgTextFormatValue])
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var hs-var">runIdentity</span></span><span> </span><span class="annot"><span class="annottext">(Identity (ByteString, [Maybe PgTextFormatValue])
 -&gt; (ByteString, [Maybe PgTextFormatValue]))
-&gt; (sql -&gt; Identity (ByteString, [Maybe PgTextFormatValue]))
-&gt; sql
-&gt; (ByteString, [Maybe PgTextFormatValue])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Escaping Identity
-&gt; sql -&gt; Identity (ByteString, [Maybe PgTextFormatValue])
forall sql (m :: * -&gt; *).
(SqlExpression sql, Monad m) =&gt;
Escaping m -&gt; sql -&gt; m (ByteString, [Maybe PgTextFormatValue])
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toBytesAndParams"><span class="hs-identifier hs-var">toBytesAndParams</span></a></span><span> </span><span class="annot"><span class="annottext">Escaping Identity
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#exampleEscaping"><span class="hs-identifier hs-var">exampleEscaping</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">{- |
  This is an internal datatype used during the sql building process to track
  how many params have been seen so that placeholder indices (e.g. '$1', etc)
  can be generated to include in the sql.
-}</span><span>
</span><span id="line-192"></span><span class="hs-keyword">data</span><span> </span><span id="ParamsProgress"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-var">ParamsProgress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ParamsProgress"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-var">ParamsProgress</span></a></span></span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="paramCount"><span class="annot"><span class="annottext">ParamsProgress -&gt; Int
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramCount"><span class="hs-identifier hs-var hs-var">paramCount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="paramValues"><span class="annot"><span class="annottext">ParamsProgress -&gt; DList (Maybe PgTextFormatValue)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramValues"><span class="hs-identifier hs-var hs-var">paramValues</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.PgTextFormatValue.html#PgTextFormatValue"><span class="hs-identifier hs-type">PgTextFormatValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">{- |
  An initial value for 'ParamsProgress' that indicates no params have been been
  encountered yet.
-}</span><span>
</span><span id="line-201"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#startingProgress"><span class="hs-identifier hs-type">startingProgress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span>
</span><span id="line-202"></span><span id="startingProgress"><span class="annot"><span class="annottext">startingProgress :: ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#startingProgress"><span class="hs-identifier hs-var hs-var">startingProgress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><span class="annottext">ParamsProgress :: Int -&gt; DList (Maybe PgTextFormatValue) -&gt; ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">paramCount :: Int
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramCount"><span class="hs-identifier hs-var">paramCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">paramValues :: DList (Maybe PgTextFormatValue)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramValues"><span class="hs-identifier hs-var">paramValues</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList (Maybe PgTextFormatValue)
forall a. DList a
</span><span class="hs-identifier hs-var">DList.empty</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">{- |
  Adds a parameter value to the end of the params list, tracking the count
  of parameters as it does so.
-}</span><span>
</span><span id="line-212"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#snocParam"><span class="hs-identifier hs-type">snocParam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.PgTextFormatValue.html#PgTextFormatValue"><span class="hs-identifier hs-type">PgTextFormatValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span>
</span><span id="line-213"></span><span id="snocParam"><span class="annot"><span class="annottext">snocParam :: ParamsProgress -&gt; Maybe PgTextFormatValue -&gt; ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#snocParam"><span class="hs-identifier hs-var hs-var">snocParam</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span> </span><span id="local-6989586621679115007"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679115007"><span class="hs-identifier hs-var">count</span></a></span></span><span> </span><span id="local-6989586621679115006"><span class="annot"><span class="annottext">DList (Maybe PgTextFormatValue)
</span><a href="#local-6989586621679115006"><span class="hs-identifier hs-var">values</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679115005"><span class="annot"><span class="annottext">Maybe PgTextFormatValue
</span><a href="#local-6989586621679115005"><span class="hs-identifier hs-var">newValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">ParamsProgress :: Int -&gt; DList (Maybe PgTextFormatValue) -&gt; ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">paramCount :: Int
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramCount"><span class="hs-identifier hs-var">paramCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679115007"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">paramValues :: DList (Maybe PgTextFormatValue)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramValues"><span class="hs-identifier hs-var">paramValues</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList (Maybe PgTextFormatValue)
-&gt; Maybe PgTextFormatValue -&gt; DList (Maybe PgTextFormatValue)
forall a. DList a -&gt; a -&gt; DList a
</span><span class="hs-identifier hs-var">DList.snoc</span></span><span> </span><span class="annot"><span class="annottext">DList (Maybe PgTextFormatValue)
</span><a href="#local-6989586621679115006"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PgTextFormatValue
</span><a href="#local-6989586621679115005"><span class="hs-identifier hs-var">newValue</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-comment">{- |
  Constructs a bytestring builder that can be executed to get the bytes for a
  section of 'RawSql'. This function takes and returns a 'ParamsProgress' so
  that placeholder indices (e.g. '$1') and their corresponding parameter values
  can be tracked across multiple sections of raw sql.
-}</span><span>
</span><span id="line-225"></span><span id="local-6989586621679115129"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#buildSqlWithProgress"><span class="hs-identifier hs-type">buildSqlWithProgress</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Escaping"><span class="hs-identifier hs-type">Escaping</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="#local-6989586621679115129"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BSB.Builder</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#ParamsProgress"><span class="hs-identifier hs-type">ParamsProgress</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-231"></span><span id="buildSqlWithProgress"><span class="annot"><span class="annottext">buildSqlWithProgress :: Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#buildSqlWithProgress"><span class="hs-identifier hs-var hs-var">buildSqlWithProgress</span></a></span></span><span> </span><span id="local-6989586621679115002"><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115002"><span class="hs-identifier hs-var">escaping</span></a></span></span><span> </span><span id="local-6989586621679115001"><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115001"><span class="hs-identifier hs-var">progress</span></a></span></span><span> </span><span id="local-6989586621679115000"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115000"><span class="hs-identifier hs-var">rawSql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679115000"><span class="hs-identifier hs-var">rawSql</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-type">SqlSection</span></a></span><span> </span><span id="local-6989586621679114999"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114999"><span class="hs-identifier hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><span class="annottext">(Builder, ParamsProgress) -&gt; m (Builder, ParamsProgress)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114999"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115001"><span class="hs-identifier hs-var">progress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a></span><span> </span><span id="local-6989586621679114998"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114998"><span class="hs-identifier hs-var">unescapedString</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-236"></span><span>      </span><span id="local-6989586621679114997"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114997"><span class="hs-identifier hs-var">escapedString</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Escaping m -&gt; ByteString -&gt; m ByteString
forall (m :: * -&gt; *). Escaping m -&gt; ByteString -&gt; m ByteString
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#escapeStringLiteral"><span class="hs-identifier hs-var hs-var">escapeStringLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115002"><span class="hs-identifier hs-var">escaping</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114998"><span class="hs-identifier hs-var">unescapedString</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679114996"><span class="annot"><span class="annottext">builder :: Builder
</span><a href="#local-6989586621679114996"><span class="hs-identifier hs-var hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>            </span><span class="annot"><span class="annottext">Char -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.char8</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span>
</span><span id="line-240"></span><span>              </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.byteString</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114997"><span class="hs-identifier hs-var">escapedString</span></a></span><span>
</span><span id="line-241"></span><span>              </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.char8</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="annottext">(Builder, ParamsProgress) -&gt; m (Builder, ParamsProgress)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114996"><span class="hs-identifier hs-var">builder</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115001"><span class="hs-identifier hs-var">progress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Parameter"><span class="hs-identifier hs-type">Parameter</span></a></span><span> </span><span id="local-6989586621679114993"><span class="annot"><span class="annottext">SqlValue
</span><a href="#local-6989586621679114993"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-245"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679114992"><span class="annot"><span class="annottext">newProgress :: ParamsProgress
</span><a href="#local-6989586621679114992"><span class="hs-identifier hs-var hs-var">newProgress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParamsProgress -&gt; Maybe PgTextFormatValue -&gt; ParamsProgress
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#snocParam"><span class="hs-identifier hs-var">snocParam</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115001"><span class="hs-identifier hs-var">progress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SqlValue -&gt; Maybe PgTextFormatValue
</span><a href="Orville.PostgreSQL.Internal.SqlValue.html#toPgValue"><span class="hs-identifier hs-var">SqlValue.toPgValue</span></a></span><span> </span><span class="annot"><span class="annottext">SqlValue
</span><a href="#local-6989586621679114993"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>          </span><span id="local-6989586621679114990"><span class="annot"><span class="annottext">placeholder :: Builder
</span><a href="#local-6989586621679114990"><span class="hs-identifier hs-var hs-var">placeholder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.stringUtf8</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;$&quot;</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.intDec</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParamsProgress -&gt; Int
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#paramCount"><span class="hs-identifier hs-var hs-var">paramCount</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114992"><span class="hs-identifier hs-var">newProgress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Builder, ParamsProgress) -&gt; m (Builder, ParamsProgress)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114990"><span class="hs-identifier hs-var">placeholder</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114992"><span class="hs-identifier hs-var">newProgress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#Append"><span class="hs-identifier hs-type">Append</span></a></span><span> </span><span id="local-6989586621679114987"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114987"><span class="hs-identifier hs-var">first</span></a></span></span><span> </span><span id="local-6989586621679114986"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114986"><span class="hs-identifier hs-var">second</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-249"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679114985"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114985"><span class="hs-identifier hs-var">firstBuilder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114984"><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114984"><span class="hs-identifier hs-var">nextProgress</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
forall (m :: * -&gt; *).
Monad m =&gt;
Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#buildSqlWithProgress"><span class="hs-identifier hs-var">buildSqlWithProgress</span></a></span><span> </span><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115002"><span class="hs-identifier hs-var">escaping</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679115001"><span class="hs-identifier hs-var">progress</span></a></span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114987"><span class="hs-identifier hs-var">first</span></a></span><span>
</span><span id="line-250"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679114983"><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114983"><span class="hs-identifier hs-var">secondBuilder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114982"><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114982"><span class="hs-identifier hs-var">finalProgress</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
forall (m :: * -&gt; *).
Monad m =&gt;
Escaping m
-&gt; ParamsProgress -&gt; RawSql -&gt; m (Builder, ParamsProgress)
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#buildSqlWithProgress"><span class="hs-identifier hs-var">buildSqlWithProgress</span></a></span><span> </span><span class="annot"><span class="annottext">Escaping m
</span><a href="#local-6989586621679115002"><span class="hs-identifier hs-var">escaping</span></a></span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114984"><span class="hs-identifier hs-var">nextProgress</span></a></span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114986"><span class="hs-identifier hs-var">second</span></a></span><span>
</span><span id="line-251"></span><span>      </span><span class="annot"><span class="annottext">(Builder, ParamsProgress) -&gt; m (Builder, ParamsProgress)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114985"><span class="hs-identifier hs-var">firstBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; Builder -&gt; Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Builder
</span><a href="#local-6989586621679114983"><span class="hs-identifier hs-var">secondBuilder</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParamsProgress
</span><a href="#local-6989586621679114982"><span class="hs-identifier hs-var">finalProgress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from a 'String' value using utf8 encoding.

  Note that because the string is treated as raw sql it completely up to the
  caller to protected againt sql-injections attacks when using this function.
  Never use this function with input read from an untrusted source.
-}</span><span>
</span><span id="line-260"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-type">fromString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-261"></span><span id="fromString"><span class="annot"><span class="annottext">fromString :: String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var hs-var">fromString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (String -&gt; Builder) -&gt; String -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.stringUtf8</span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from a 'Text' value using utf8 encoding.

  Note that because the text is treated as raw sql it completely up to the
  caller to protected againt sql-injections attacks when using this function.
  Never use this function with input read from an untrusted source.
-}</span><span>
</span><span id="line-271"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromText"><span class="hs-identifier hs-type">fromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-272"></span><span id="fromText"><span class="annot"><span class="annottext">fromText :: Text -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromText"><span class="hs-identifier hs-var hs-var">fromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-273"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Text -&gt; Builder) -&gt; Text -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Builder
</span><span class="hs-identifier hs-var">TextEnc.encodeUtf8Builder</span></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from a 'ByteString' value, which is assumed to be
  encoded sensibly for the database to handle.

  Note that because the string is treated as raw sql it completely up to the
  caller to protected againt sql-injections attacks when using this function.
  Never use this function with input read from an untrusted source.
-}</span><span>
</span><span id="line-283"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#fromBytes"><span class="hs-identifier hs-type">fromBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-284"></span><span id="fromBytes"><span class="annot"><span class="annottext">fromBytes :: ByteString -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromBytes"><span class="hs-identifier hs-var hs-var">fromBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql)
-&gt; (ByteString -&gt; Builder) -&gt; ByteString -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.byteString</span></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">{- |
  Includes an input parameter in the 'RawSql' statement that will be passed
  using placeholders (e.g. '$1') rather than being included directly in the sql
  statement. This is the correct way to include input from untrusted sources as
  part of a 'RawSql' query. The parameter must be formatted in a textual
  representation, which the database will interpret. The database type for the
  value will be inferred by the database based on its usage in the query.
-}</span><span>
</span><span id="line-295"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#parameter"><span class="hs-identifier hs-type">parameter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-296"></span><span id="parameter"><span class="annot"><span class="annottext">parameter :: SqlValue -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#parameter"><span class="hs-identifier hs-var hs-var">parameter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><span class="annottext">SqlValue -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#Parameter"><span class="hs-identifier hs-var">Parameter</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">{- |
  Includes a bytestring value as string literal in the SQL statement. The
  string literal will be escaped and quoted for you, the value provided does
  not need to include surrounding quotes or escape special characters.

  Note: It's better to use the 'parameter' function where possible to pass
  values to be used as input to a SQL statement. There are some situations
  where PostgreSQL does not allow this, however (for instance, in some DDL
  statements). This function is provided for those situations.
-}</span><span>
</span><span id="line-309"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#stringLiteral"><span class="hs-identifier hs-type">stringLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-310"></span><span id="stringLiteral"><span class="annot"><span class="annottext">stringLiteral :: ByteString -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#stringLiteral"><span class="hs-identifier hs-var hs-var">stringLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#StringLiteral"><span class="hs-identifier hs-var">StringLiteral</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-comment">{- |
  Concatenates a list of 'RawSql' values using another 'RawSql' value as
  the a separator between the items.
-}</span><span>
</span><span id="line-317"></span><span id="local-6989586621679114979"><span id="local-6989586621679114980"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#intercalate"><span class="hs-identifier hs-type">intercalate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679114980"><span class="hs-identifier hs-type">sql</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679114979"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679114979"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679114980"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span></span></span><span>
</span><span id="line-318"></span><span id="intercalate"><span class="annot"><span class="annottext">intercalate :: RawSql -&gt; f sql -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#intercalate"><span class="hs-identifier hs-var hs-var">intercalate</span></a></span></span><span> </span><span id="local-6989586621679114978"><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114978"><span class="hs-identifier hs-var">separator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="annottext">[RawSql] -&gt; RawSql
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><span class="annottext">([RawSql] -&gt; RawSql) -&gt; (f sql -&gt; [RawSql]) -&gt; f sql -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RawSql -&gt; [RawSql] -&gt; [RawSql]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">List.intersperse</span></span><span> </span><span class="annot"><span class="annottext">RawSql
</span><a href="#local-6989586621679114978"><span class="hs-identifier hs-var">separator</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><span class="annottext">([RawSql] -&gt; [RawSql]) -&gt; (f sql -&gt; [RawSql]) -&gt; f sql -&gt; [RawSql]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(sql -&gt; RawSql) -&gt; [sql] -&gt; [RawSql]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">sql -&gt; RawSql
forall a. SqlExpression a =&gt; a -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toRawSql"><span class="hs-identifier hs-var">toRawSql</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">([sql] -&gt; [RawSql]) -&gt; (f sql -&gt; [sql]) -&gt; f sql -&gt; [RawSql]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">f sql -&gt; [sql]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">Fold.toList</span></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">{- |
  Executes a 'RawSql' value using the 'Conn.executeRaw' function. Make sure
  to read the documentation of 'Conn.executeRaw' for caveats and warnings.
  Use with caution.

  Note that because this is done in 'IO' no callback functions are available to
  be called.
-}</span><span>
</span><span id="line-332"></span><span id="local-6989586621679115098"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#execute"><span class="hs-identifier hs-type">execute</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679115098"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679115098"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LibPQ.Result</span></span></span><span>
</span><span id="line-333"></span><span id="execute"><span class="annot"><span class="annottext">execute :: Connection -&gt; sql -&gt; IO Result
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#execute"><span class="hs-identifier hs-var hs-var">execute</span></a></span></span><span> </span><span id="local-6989586621679114975"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679114975"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679114974"><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679114974"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679114973"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114973"><span class="hs-identifier hs-var">sqlBytes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679114972"><span class="annot"><span class="annottext">[Maybe PgTextFormatValue]
</span><a href="#local-6989586621679114972"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Escaping IO -&gt; sql -&gt; IO (ByteString, [Maybe PgTextFormatValue])
forall sql (m :: * -&gt; *).
(SqlExpression sql, Monad m) =&gt;
Escaping m -&gt; sql -&gt; m (ByteString, [Maybe PgTextFormatValue])
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#toBytesAndParams"><span class="hs-identifier hs-var">toBytesAndParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Connection -&gt; Escaping IO
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#connectionEscaping"><span class="hs-identifier hs-var">connectionEscaping</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679114975"><span class="hs-identifier hs-var">connection</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679114974"><span class="hs-identifier hs-var">sql</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><span class="annottext">Connection -&gt; ByteString -&gt; [Maybe PgTextFormatValue] -&gt; IO Result
</span><a href="Orville.PostgreSQL.Connection.html#executeRaw"><span class="hs-identifier hs-var">Conn.executeRaw</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679114975"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679114973"><span class="hs-identifier hs-var">sqlBytes</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe PgTextFormatValue]
</span><a href="#local-6989586621679114972"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">{- |
  Executes a 'RawSql' value using the 'Conn.executeRawVoid' function. Make sure
  to read the documentation of 'Conn.executeRawVoid' for caveats and warnings.
  Use with caution.

  Note that because this is done in 'IO' no callback functions are available to
  be called.
-}</span><span>
</span><span id="line-345"></span><span id="local-6989586621679114970"><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#executeVoid"><span class="hs-identifier hs-type">executeVoid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlExpression"><span class="hs-identifier hs-type">SqlExpression</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679114970"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Connection.html#Connection"><span class="hs-identifier hs-type">Connection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679114970"><span class="hs-identifier hs-type">sql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-346"></span><span id="executeVoid"><span class="annot"><span class="annottext">executeVoid :: Connection -&gt; sql -&gt; IO ()
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#executeVoid"><span class="hs-identifier hs-var hs-var">executeVoid</span></a></span></span><span> </span><span id="local-6989586621679114969"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679114969"><span class="hs-identifier hs-var">connection</span></a></span></span><span> </span><span id="local-6989586621679114968"><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679114968"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>  </span><span class="annot"><span class="annottext">IO Result -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(IO Result -&gt; IO ()) -&gt; IO Result -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Connection -&gt; sql -&gt; IO Result
forall sql. SqlExpression sql =&gt; Connection -&gt; sql -&gt; IO Result
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#execute"><span class="hs-identifier hs-var">execute</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679114969"><span class="hs-identifier hs-var">connection</span></a></span><span> </span><span class="annot"><span class="annottext">sql
</span><a href="#local-6989586621679114968"><span class="hs-identifier hs-var">sql</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- | Just a plain old space, provided for convenience</span><span>
</span><span id="line-350"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#space"><span class="hs-identifier hs-type">space</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-351"></span><span id="space"><span class="annot"><span class="annottext">space :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#space"><span class="hs-identifier hs-var hs-var">space</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | Just a plain old comma, provided for convenience</span><span>
</span><span id="line-354"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#comma"><span class="hs-identifier hs-type">comma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-355"></span><span id="comma"><span class="annot"><span class="annottext">comma :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#comma"><span class="hs-identifier hs-var hs-var">comma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-comment">-- | Comma space separator, provided for convenience</span><span>
</span><span id="line-358"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#commaSpace"><span class="hs-identifier hs-type">commaSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-359"></span><span id="commaSpace"><span class="annot"><span class="annottext">commaSpace :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#commaSpace"><span class="hs-identifier hs-var hs-var">commaSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span class="hs-comment">-- | Just a plain old left paren, provided for convenience</span><span>
</span><span id="line-362"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#leftParen"><span class="hs-identifier hs-type">leftParen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-363"></span><span id="leftParen"><span class="annot"><span class="annottext">leftParen :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#leftParen"><span class="hs-identifier hs-var hs-var">leftParen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">-- | Just a plain old right paren, provided for convenience</span><span>
</span><span id="line-366"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#rightParen"><span class="hs-identifier hs-type">rightParen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-367"></span><span id="rightParen"><span class="annot"><span class="annottext">rightParen :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#rightParen"><span class="hs-identifier hs-var hs-var">rightParen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-- | Just a plain period, provided for convenience</span><span>
</span><span id="line-370"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#dot"><span class="hs-identifier hs-type">dot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-371"></span><span id="dot"><span class="annot"><span class="annottext">dot :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#dot"><span class="hs-identifier hs-var hs-var">dot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- | Just a plain double quote, provided for convenience</span><span>
</span><span id="line-374"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleQuote"><span class="hs-identifier hs-type">doubleQuote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-375"></span><span id="doubleQuote"><span class="annot"><span class="annottext">doubleQuote :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleQuote"><span class="hs-identifier hs-var hs-var">doubleQuote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-comment">-- | Just two colons, provided for convenience</span><span>
</span><span id="line-378"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleColon"><span class="hs-identifier hs-type">doubleColon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-379"></span><span id="doubleColon"><span class="annot"><span class="annottext">doubleColon :: RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#doubleColon"><span class="hs-identifier hs-var hs-var">doubleColon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;::&quot;</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from an 'Int.Int8' value. The integral value is included
  directly in the SQL string, not passed as a parameter. When dealing with user
  input it is better to use 'parameter' rather whenever possible.
-}</span><span>
</span><span id="line-386"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int8DecLiteral"><span class="hs-identifier hs-type">int8DecLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int.Int8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-387"></span><span id="int8DecLiteral"><span class="annot"><span class="annottext">int8DecLiteral :: Int8 -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#int8DecLiteral"><span class="hs-identifier hs-var hs-var">int8DecLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Int8 -&gt; Builder) -&gt; Int8 -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int8 -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.int8Dec</span></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from an 'Int.Int16' value. The integral value is included
  directly in the SQL string, not passed as a parameter. When dealing with user
  input it is better to use 'parameter' rather whenever possible.
-}</span><span>
</span><span id="line-395"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int16DecLiteral"><span class="hs-identifier hs-type">int16DecLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int.Int16</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-396"></span><span id="int16DecLiteral"><span class="annot"><span class="annottext">int16DecLiteral :: Int16 -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#int16DecLiteral"><span class="hs-identifier hs-var hs-var">int16DecLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-397"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Int16 -&gt; Builder) -&gt; Int16 -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int16 -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.int16Dec</span></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from an 'Int.Int32' value. The integral value is included
  directly in the SQL string, not passed as a parameter. When dealing with user
  input it is better to use 'parameter' rather whenever possible.
-}</span><span>
</span><span id="line-404"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int32DecLiteral"><span class="hs-identifier hs-type">int32DecLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int.Int32</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-405"></span><span id="int32DecLiteral"><span class="annot"><span class="annottext">int32DecLiteral :: Int32 -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#int32DecLiteral"><span class="hs-identifier hs-var hs-var">int32DecLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-406"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Int32 -&gt; Builder) -&gt; Int32 -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.int32Dec</span></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from an 'Int.Int64' value. The integral value is included
  directly in the SQL string, not passed as a parameter. When dealing with user
  input it is better to use 'parameter' rather whenever possible.
-}</span><span>
</span><span id="line-413"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#int64DecLiteral"><span class="hs-identifier hs-type">int64DecLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int.Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-414"></span><span id="int64DecLiteral"><span class="annot"><span class="annottext">int64DecLiteral :: Int64 -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#int64DecLiteral"><span class="hs-identifier hs-var hs-var">int64DecLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Int64 -&gt; Builder) -&gt; Int64 -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.int64Dec</span></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">{- |
  Constructs a 'RawSql' from an 'Int' value. The integral value is included
  directly in the SQL string, not passed as a parameter. When dealing with user
  input it is better to use 'parameter' rather whenever possible.
-}</span><span>
</span><span id="line-422"></span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#intDecLiteral"><span class="hs-identifier hs-type">intDecLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.RawSql.html#RawSql"><span class="hs-identifier hs-type">RawSql</span></a></span><span>
</span><span id="line-423"></span><span id="intDecLiteral"><span class="annot"><span class="annottext">intDecLiteral :: Int -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#intDecLiteral"><span class="hs-identifier hs-var hs-var">intDecLiteral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>  </span><span class="annot"><span class="annottext">Builder -&gt; RawSql
</span><a href="Orville.PostgreSQL.Internal.RawSql.html#SqlSection"><span class="hs-identifier hs-var">SqlSection</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; RawSql) -&gt; (Int -&gt; Builder) -&gt; Int -&gt; RawSql
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Builder
</span><span class="hs-identifier hs-var">BSB.intDec</span></span><span>
</span><span id="line-425"></span></pre></body></html>