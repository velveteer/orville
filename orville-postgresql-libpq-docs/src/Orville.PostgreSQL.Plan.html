<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Orville.PostgreSQL.Plan</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier">Plan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier">Planned</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier">Execute</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier">Explain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#askParam"><span class="hs-identifier">askParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Using a Plan after it is constructed</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#execute"><span class="hs-identifier">execute</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#explain"><span class="hs-identifier">explain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Making a Plan to find rows in the database</span></span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findMaybeOne"><span class="hs-identifier">findMaybeOne</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findMaybeOneWhere"><span class="hs-identifier">findMaybeOneWhere</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findOne"><span class="hs-identifier">findOne</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findOneWhere"><span class="hs-identifier">findOneWhere</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findAll"><span class="hs-identifier">findAll</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findAllWhere"><span class="hs-identifier">findAllWhere</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Creating a multi-step Plan from other Plan values</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#bind"><span class="hs-identifier">bind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#use"><span class="hs-identifier">use</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#using"><span class="hs-identifier">using</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier">chain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#apply"><span class="hs-identifier">apply</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planMany"><span class="hs-identifier">planMany</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planList"><span class="hs-identifier">planList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#focusParam"><span class="hs-identifier">focusParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planEither"><span class="hs-identifier">planEither</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planMaybe"><span class="hs-identifier">planMaybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Bridges from other types into Plan</span></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Operation.html#AssertionFailed"><span class="hs-identifier">Op.AssertionFailed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#assert"><span class="hs-identifier">assert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planSelect"><span class="hs-identifier">planSelect</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier">planOperation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">throwIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MIO</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">partitionEithers</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEL</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- import qualified Database.Orville.PostgreSQL.Core as Core</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.FieldDefinition</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FieldDefinition</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.MonadOrville.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.MonadOrville</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MonadOrville</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Select.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.Select</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Internal.Select.html#Select"><span class="hs-identifier">Select</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SelectOptions.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.SelectOptions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SelectOptions</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.TableDefinition</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TableDefinition</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableIdentifier.html"><span class="hs-identifier">Orville.PostgreSQL.Internal.TableIdentifier</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TableIdentifier</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Explanation.html"><span class="hs-identifier">Orville.PostgreSQL.Plan.Explanation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Exp</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html"><span class="hs-identifier">Orville.PostgreSQL.Plan.Many</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier">Many</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html"><span class="hs-identifier">Orville.PostgreSQL.Plan.Many</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Many</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Operation.html"><span class="hs-identifier">Orville.PostgreSQL.Plan.Operation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Op</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">{- |
  A 'Plan' is an executable set of queries that can be executed to load data
  from the database, using the results of prior queries as input parameters to
  following queries in controlled ways. In particular, the &quot;controlled&quot; aspect
  of this allows plans that take a single input to be adapted to take multiple
  input parameters in a list without the resulting plan executing N+1 queries.
  This restriction means that while query results can be used as input
  parameters to later queries, they cannot be used to decide to run completely
  different queries based on other query results. Allowing this would prevent
  the 'Plan' structure from eliminating N+1 query loops.

  Note that during execution queries are never combined across tables to form
  joins or subqueries. Queries are still executed in the same sequence as
  specified in the plan, just on all the inputs at once rather than in a loop.
  If you need to do a join with a plan, you can always construction your
  own custom 'Op.Operation' and use 'planOperation' to incorporate into a plan.

  The @param@ type variable indicates what type of value is expected as input
  when the plan is executed.

  The @result@ type for a plan indicates what Haskell type is produced
  when the plan is executed.

  The @scope@ type is used internally by Orville to track the plan is currently
  executed against a single input or multiple inputs. This type parameter
  should never specified as a concrete type in user code, but must be exposed
  as a variable to ensure that execute scope is tracked correctly through
  usages of 'bind'.
-}</span><span>
</span><span id="line-89"></span><span class="hs-keyword">data</span><span> </span><span id="Plan"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-var">Plan</span></a></span></span><span> </span><span id="local-6989586621679124452"><span class="annot"><a href="#local-6989586621679124452"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span id="local-6989586621679124451"><span class="annot"><a href="#local-6989586621679124451"><span class="hs-identifier hs-type">param</span></a></span></span><span> </span><span id="local-6989586621679124450"><span class="annot"><a href="#local-6989586621679124450"><span class="hs-identifier hs-type">result</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>  </span><span id="local-6989586621679124754"><span id="local-6989586621679124755"><span id="local-6989586621679124756"><span id="PlanOp"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-var">PlanOp</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Operation.html#Operation"><span class="hs-identifier hs-type">Op.Operation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124756"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124755"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124754"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124756"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124755"><span class="hs-identifier hs-type">result</span></a></span></span></span></span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621679124447"><span id="local-6989586621679124448"><span id="local-6989586621679124638"><span id="PlanMany"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanMany"><span class="hs-identifier hs-var">PlanMany</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679124641"><span class="annot"><a href="#local-6989586621679124641"><span class="hs-identifier hs-type">manyScope</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124641"><span class="hs-identifier hs-type">manyScope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124448"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124447"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124638"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124448"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124448"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124447"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621679124442"><span id="local-6989586621679124443"><span id="local-6989586621679124444"><span id="local-6989586621679124445"><span id="local-6989586621679124613"><span id="PlanEither"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanEither"><span class="hs-identifier hs-var">PlanEither</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124613"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124445"><span class="hs-identifier hs-type">leftParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124444"><span class="hs-identifier hs-type">leftResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124613"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124443"><span class="hs-identifier hs-type">rightParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124442"><span class="hs-identifier hs-type">rightResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124613"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679124445"><span class="hs-identifier hs-type">leftParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124443"><span class="hs-identifier hs-type">rightParam</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679124444"><span class="hs-identifier hs-type">leftResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124442"><span class="hs-identifier hs-type">rightResult</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679124440"><span id="local-6989586621679124588"><span id="local-6989586621679124589"><span id="local-6989586621679124590"><span id="Bind"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Bind"><span class="hs-identifier hs-var">Bind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124590"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124589"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124440"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124590"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124589"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124440"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124590"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124589"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124588"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124590"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124589"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124588"><span class="hs-identifier hs-type">result</span></a></span></span></span></span></span><span>
</span><span id="line-102"></span><span>  </span><span id="local-6989586621679124582"><span id="local-6989586621679124583"><span id="local-6989586621679124584"><span id="Use"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Use"><span class="hs-identifier hs-var">Use</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124584"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124583"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124582"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124584"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124583"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124582"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621679124813"><span id="local-6989586621679124814"><span id="local-6989586621679124815"><span id="Pure"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679124815"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124814"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124813"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124815"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621679124436"><span id="local-6989586621679124816"><span id="local-6989586621679124818"><span id="local-6989586621679124819"><span id="Apply"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124819"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124818"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679124436"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124816"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124819"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124818"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124436"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124819"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124818"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124816"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621679124431"><span id="local-6989586621679124432"><span id="local-6989586621679124433"><span id="local-6989586621679124434"><span id="Chain"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Chain"><span class="hs-identifier hs-var">Chain</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124434"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124432"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124434"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124432"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124431"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124434"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124431"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span id="local-6989586621679124428"><span id="local-6989586621679124429"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679124425"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124429"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124428"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621679124423"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; Plan scope param a -&gt; Plan scope param b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679124422"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124422"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
forall scope param a b.
Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Plan scope param (a -&gt; b)
forall a scope param. a -&gt; Plan scope param a
</span><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124422"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621679124420"><span id="local-6989586621679124421"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679124411"><span id="local-6989586621679124413"><span id="local-6989586621679124415"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124421"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124420"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621679124409"><span class="annot"><span class="annottext">pure :: a -&gt; Plan scope param a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Plan scope param a
forall a scope param. a -&gt; Plan scope param a
</span><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span id="local-6989586621679124408"><span class="annot"><span class="annottext">&lt;*&gt; :: Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
forall scope param a b.
Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span></span></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-comment">{- |
  'Execute' is a tag type used by as the 'scope' variable for
  'Plan' values when executing them via the 'execute' function.
-}</span><span>
</span><span id="line-124"></span><span class="hs-keyword">data</span><span> </span><span id="Execute"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier hs-var">Execute</span></a></span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">{- |
  'ExecuteMany' is an internal tag type used by as the 'scope' variable for
  'Plan' values when executing them against multiple inputs via the
  'executeMany' internal function.
-}</span><span>
</span><span id="line-131"></span><span class="hs-keyword">data</span><span> </span><span id="ExecuteMany"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExecuteMany"><span class="hs-identifier hs-var">ExecuteMany</span></a></span></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">{- |
  A 'Planned' value is a wrapper around the results of previous run queries
  when using the 'bind' function. At the time that you are writing a plan you
  do not know whether the 'Plan' will be run with a single input or multiple
  inputs. A 'Planned' value may end up being either an individual item or a
  list of items. Due to this, your ability to interact with the value is
  limited to the use of 'fmap' to extract (or build) other values from the
  results. 'Planned' values can be used together with the 'use' function to
  make a 'Plan' that produces the extracted value.

  Note that while 'Planned' could provide an 'Applicative' instance as well, it
  does not to avoid confusion with 'Applicative' instance for 'Plan' itself.
  If you need to build a value from several 'Planned' values using
  'Applicative', you should call 'use' on each of the values and use the
  'Applicative' instance for 'Plan'.
-}</span><span>
</span><span id="line-149"></span><span class="hs-keyword">data</span><span> </span><span id="Planned"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-var">Planned</span></a></span></span><span> </span><span id="local-6989586621679124407"><span class="annot"><a href="#local-6989586621679124407"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span id="local-6989586621679124406"><span class="annot"><a href="#local-6989586621679124406"><span class="hs-identifier hs-type">param</span></a></span></span><span> </span><span id="local-6989586621679124405"><span class="annot"><a href="#local-6989586621679124405"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621679124772"><span id="local-6989586621679124773"><span id="PlannedOne"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedOne"><span class="hs-identifier hs-var">PlannedOne</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679124773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier hs-type">Execute</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124772"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124773"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679124768"><span id="local-6989586621679124769"><span id="PlannedMany"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedMany"><span class="hs-identifier hs-var">PlannedMany</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124769"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124768"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExecuteMany"><span class="hs-identifier hs-type">ExecuteMany</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124769"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124768"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621679124765"><span id="local-6989586621679124766"><span id="PlannedExplain"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedExplain"><span class="hs-identifier hs-var">PlannedExplain</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier hs-type">Explain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124766"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124765"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span id="local-6989586621679124400"><span id="local-6989586621679124401"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679124397"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124401"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124400"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621679124396"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; Planned scope param a -&gt; Planned scope param b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Planned scope param a -&gt; Planned scope param b
forall a b scope param.
(a -&gt; b) -&gt; Planned scope param a -&gt; Planned scope param b
</span><a href="Orville.PostgreSQL.Plan.html#mapPlanned"><span class="hs-identifier hs-var">mapPlanned</span></a></span></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">{- |
  'mapPlanned' applies a function to what value or values have been produced by
  the plan. This function can also be called as 'fmap' or '&lt;$&gt;' thorugh the
  'Functor' instance for 'Planned'.
-}</span><span>
</span><span id="line-162"></span><span id="local-6989586621679124779"><span id="local-6989586621679124780"><span id="local-6989586621679124781"><span id="local-6989586621679124782"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#mapPlanned"><span class="hs-identifier hs-type">mapPlanned</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679124782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124781"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124780"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124779"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124780"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124779"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124781"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-163"></span><span id="mapPlanned"><span class="annot"><span class="annottext">mapPlanned :: (a -&gt; b) -&gt; Planned scope param a -&gt; Planned scope param b
</span><a href="Orville.PostgreSQL.Plan.html#mapPlanned"><span class="hs-identifier hs-var hs-var">mapPlanned</span></a></span></span><span> </span><span id="local-6989586621679124394"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124394"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679124393"><span class="annot"><span class="annottext">Planned scope param a
</span><a href="#local-6989586621679124393"><span class="hs-identifier hs-var">planned</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Planned scope param a
</span><a href="#local-6989586621679124393"><span class="hs-identifier hs-var">planned</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedOne"><span class="hs-identifier hs-type">PlannedOne</span></a></span><span> </span><span id="local-6989586621679124392"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124392"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">b -&gt; Planned Execute param b
forall a param. a -&gt; Planned Execute param a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedOne"><span class="hs-identifier hs-var">PlannedOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124394"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124392"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedMany"><span class="hs-identifier hs-type">PlannedMany</span></a></span><span> </span><span id="local-6989586621679124391"><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124391"><span class="hs-identifier hs-var">manyAs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>      </span><span class="annot"><span class="annottext">Many param b -&gt; Planned ExecuteMany param b
forall k a. Many k a -&gt; Planned ExecuteMany k a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedMany"><span class="hs-identifier hs-var">PlannedMany</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Many param a -&gt; Many param b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124394"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124391"><span class="hs-identifier hs-var">manyAs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><span class="annottext">Planned scope param a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedExplain"><span class="hs-identifier hs-var">PlannedExplain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><span class="annottext">Planned scope param b
forall param a. Planned Explain param a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedExplain"><span class="hs-identifier hs-var">PlannedExplain</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">{- |
  'resolveOne' resolves a 'Planned' value that is known to be in the 'One'
  scope to its single wrapped value.
-}</span><span>
</span><span id="line-176"></span><span id="local-6989586621679124530"><span id="local-6989586621679124531"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#resolveOne"><span class="hs-identifier hs-type">resolveOne</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier hs-type">Execute</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124531"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124530"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124530"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-177"></span><span id="resolveOne"><span class="annot"><span class="annottext">resolveOne :: Planned Execute param a -&gt; a
</span><a href="Orville.PostgreSQL.Plan.html#resolveOne"><span class="hs-identifier hs-var hs-var">resolveOne</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedOne"><span class="hs-identifier hs-type">PlannedOne</span></a></span><span> </span><span id="local-6989586621679124389"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124389"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124389"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">{- |
  'resolveMany resolves a 'Planned' value that is known to be in the 'Many'
  scope to the 'Many' value wrapped inside it.
-}</span><span>
</span><span id="line-183"></span><span id="local-6989586621679124502"><span id="local-6989586621679124503"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#resolveMany"><span class="hs-identifier hs-type">resolveMany</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExecuteMany"><span class="hs-identifier hs-type">ExecuteMany</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124503"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124502"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124503"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124502"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-184"></span><span id="resolveMany"><span class="annot"><span class="annottext">resolveMany :: Planned ExecuteMany k a -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.html#resolveMany"><span class="hs-identifier hs-var hs-var">resolveMany</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlannedMany"><span class="hs-identifier hs-type">PlannedMany</span></a></span><span> </span><span id="local-6989586621679124387"><span class="annot"><span class="annottext">Many k a
</span><a href="#local-6989586621679124387"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Many k a
</span><a href="#local-6989586621679124387"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">{- |
  'planOperation' allows any primitive 'Op.Operation' to be used as an atomic step
  in a plan. When the plan is executed, the appropriate 'Op.Operation' functions
  will be used depending on the execution context.
-}</span><span>
</span><span id="line-191"></span><span id="local-6989586621679124384"><span id="local-6989586621679124385"><span id="local-6989586621679124386"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-type">planOperation</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Operation.html#Operation"><span class="hs-identifier hs-type">Op.Operation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124386"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124385"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124384"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124386"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124385"><span class="hs-identifier hs-type">result</span></a></span></span></span></span><span>
</span><span id="line-194"></span><span id="planOperation"><span class="annot"><span class="annottext">planOperation :: Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var hs-var">planOperation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="annottext">Operation param result -&gt; Plan scope param result
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-var">PlanOp</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">{- |
  'planSelect' allows any Orville 'Select' query to be incorporated into a
  plan. Note that the 'Select' cannot depend on the plan's input parameters in
  this case. If the plan is executed with multiple inputs the same set of all
  the results will be used as the results for each of the input parameters.
-}</span><span>
</span><span id="line-203"></span><span id="local-6989586621679124382"><span id="local-6989586621679124383"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planSelect"><span class="hs-identifier hs-type">planSelect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Internal.Select.html#Select"><span class="hs-identifier hs-type">Select</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124383"><span class="hs-identifier hs-type">row</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124382"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124383"><span class="hs-identifier hs-type">row</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-204"></span><span id="planSelect"><span class="annot"><span class="annottext">planSelect :: Select row -&gt; Plan scope () [row]
</span><a href="Orville.PostgreSQL.Plan.html#planSelect"><span class="hs-identifier hs-var hs-var">planSelect</span></a></span></span><span> </span><span id="local-6989586621679124381"><span class="annot"><span class="annottext">Select row
</span><a href="#local-6989586621679124381"><span class="hs-identifier hs-var">select</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="annottext">Operation () [row] -&gt; Plan scope () [row]
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select row -&gt; Operation () [row]
forall param row. Select row -&gt; Operation param [row]
</span><a href="Orville.PostgreSQL.Plan.Operation.html#findSelect"><span class="hs-identifier hs-var">Op.findSelect</span></a></span><span> </span><span class="annot"><span class="annottext">Select row
</span><a href="#local-6989586621679124381"><span class="hs-identifier hs-var">select</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">{- |
  'askParam' allows the input parameter for the plan to be retrieved as the
  result of the plan. Together with 'bind' you can use this to get access to
  the input parameter as a 'Planned' value.
-}</span><span>
</span><span id="line-212"></span><span id="local-6989586621679124619"><span id="local-6989586621679124620"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#askParam"><span class="hs-identifier hs-type">askParam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124620"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124619"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124619"><span class="hs-identifier hs-type">param</span></a></span></span></span><span>
</span><span id="line-213"></span><span id="askParam"><span class="annot"><span class="annottext">askParam :: Plan scope param param
</span><a href="Orville.PostgreSQL.Plan.html#askParam"><span class="hs-identifier hs-var hs-var">askParam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">Operation param param -&gt; Plan scope param param
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="annot"><span class="annottext">Operation param param
forall param. Operation param param
</span><a href="Orville.PostgreSQL.Plan.Operation.html#askParam"><span class="hs-identifier hs-var">Op.askParam</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">{- |
  'findMaybeOne' constructs a 'Plan' that will find at most one row from
  the given table where the plan's input value matches the given database
  field.
-}</span><span>
</span><span id="line-221"></span><span id="local-6989586621679124697"><span id="local-6989586621679124698"><span id="local-6989586621679124699"><span id="local-6989586621679124700"><span id="local-6989586621679124701"><span id="local-6989586621679124702"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findMaybeOne"><span class="hs-identifier hs-type">findMaybeOne</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124702"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-223"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124701"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124700"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124699"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124698"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124702"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124697"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124702"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679124699"><span class="hs-identifier hs-type">readEntity</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-226"></span><span id="findMaybeOne"><span class="annot"><span class="annottext">findMaybeOne :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; Plan scope fieldValue (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.html#findMaybeOne"><span class="hs-identifier hs-var hs-var">findMaybeOne</span></a></span></span><span> </span><span id="local-6989586621679124378"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124378"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124377"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124377"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><span class="annottext">Operation fieldValue (Maybe readEntity)
-&gt; Plan scope fieldValue (Maybe readEntity)
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; WherePlanner fieldValue
-&gt; Operation fieldValue (Maybe readEntity)
forall param key writeEntity readEntity.
Ord param =&gt;
TableDefinition key writeEntity readEntity
-&gt; WherePlanner param -&gt; Operation param (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.Operation.html#findOne"><span class="hs-identifier hs-var">Op.findOne</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124378"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
forall nullability fieldValue.
FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
</span><a href="Orville.PostgreSQL.Plan.Operation.html#byField"><span class="hs-identifier hs-var">Op.byField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124377"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-comment">{- |
  'findMaybeOneWhere' is similar to 'findMaybeOne', but allows a
  'WhereCondition' to be specified to restrict which rows are matched by the
  database query.
-}</span><span>
</span><span id="line-234"></span><span id="local-6989586621679124685"><span id="local-6989586621679124686"><span id="local-6989586621679124687"><span id="local-6989586621679124688"><span id="local-6989586621679124689"><span id="local-6989586621679124690"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findMaybeOneWhere"><span class="hs-identifier hs-type">findMaybeOneWhere</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124690"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124689"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124688"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124687"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124686"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124690"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SelectOptions.WhereCondition.html#WhereCondition"><span class="hs-identifier hs-type">SelectOptions.WhereCondition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124685"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124690"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679124687"><span class="hs-identifier hs-type">readEntity</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-240"></span><span id="findMaybeOneWhere"><span class="annot"><span class="annottext">findMaybeOneWhere :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; WhereCondition
-&gt; Plan scope fieldValue (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.html#findMaybeOneWhere"><span class="hs-identifier hs-var hs-var">findMaybeOneWhere</span></a></span></span><span> </span><span id="local-6989586621679124374"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124374"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124373"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124373"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span id="local-6989586621679124372"><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124372"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="annottext">Operation fieldValue (Maybe readEntity)
-&gt; Plan scope fieldValue (Maybe readEntity)
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; WherePlanner fieldValue
-&gt; WhereCondition
-&gt; Operation fieldValue (Maybe readEntity)
forall param key writeEntity readEntity.
Ord param =&gt;
TableDefinition key writeEntity readEntity
-&gt; WherePlanner param
-&gt; WhereCondition
-&gt; Operation param (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.Operation.html#findOneWhere"><span class="hs-identifier hs-var">Op.findOneWhere</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124374"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
forall nullability fieldValue.
FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
</span><a href="Orville.PostgreSQL.Plan.Operation.html#byField"><span class="hs-identifier hs-var">Op.byField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124373"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124372"><span class="hs-identifier hs-var">cond</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">{- |
  'findOne' is similar to 'findMaybeOne, but it expects that there will always
  be a row found matching the plan's input value. If no row is found an
  'Op.AssertionFailed' exception will be thrown. This is a useful convenience
  when looking up foreign-key associations that are expected to be enforced
  by the database itself.
-}</span><span>
</span><span id="line-250"></span><span id="local-6989586621679124365"><span id="local-6989586621679124366"><span id="local-6989586621679124367"><span id="local-6989586621679124368"><span id="local-6989586621679124369"><span id="local-6989586621679124370"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findOne"><span class="hs-identifier hs-type">findOne</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679124370"><span class="hs-identifier hs-type">fieldValue</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124370"><span class="hs-identifier hs-type">fieldValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124369"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124368"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124367"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124366"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124370"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-254"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124365"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124370"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124367"><span class="hs-identifier hs-type">readEntity</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-255"></span><span id="findOne"><span class="annot"><span class="annottext">findOne :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; Plan scope fieldValue readEntity
</span><a href="Orville.PostgreSQL.Plan.html#findOne"><span class="hs-identifier hs-var hs-var">findOne</span></a></span></span><span> </span><span id="local-6989586621679124364"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124364"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124363"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124363"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-256"></span><span>  </span><span class="annot"><span class="annottext">(fieldValue -&gt; Maybe readEntity -&gt; Either String readEntity)
-&gt; Plan scope fieldValue (Maybe readEntity)
-&gt; Plan scope fieldValue readEntity
forall param a b scope.
(param -&gt; a -&gt; Either String b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; fieldValue
-&gt; Maybe readEntity
-&gt; Either String readEntity
forall fieldValue key writeEntity readEntity nullability result.
Show fieldValue =&gt;
TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; fieldValue
-&gt; Maybe result
-&gt; Either String result
</span><a href="Orville.PostgreSQL.Plan.html#assertFound"><span class="hs-identifier hs-var">assertFound</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124364"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124363"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; Plan scope fieldValue (Maybe readEntity)
forall fieldValue key writeEntity readEntity nullability scope.
Ord fieldValue =&gt;
TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; Plan scope fieldValue (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.html#findMaybeOne"><span class="hs-identifier hs-var">findMaybeOne</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124364"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124363"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">{- |
  'findOneWhere' is similar to 'findOne', but allows a 'WhereCondition' to be
  specified to restrict which rows are matched by the database query.
-}</span><span>
</span><span id="line-264"></span><span id="local-6989586621679124356"><span id="local-6989586621679124357"><span id="local-6989586621679124358"><span id="local-6989586621679124359"><span id="local-6989586621679124360"><span id="local-6989586621679124361"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findOneWhere"><span class="hs-identifier hs-type">findOneWhere</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679124361"><span class="hs-identifier hs-type">fieldValue</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124361"><span class="hs-identifier hs-type">fieldValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-266"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124360"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124359"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124358"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124357"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124361"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SelectOptions.WhereCondition.html#WhereCondition"><span class="hs-identifier hs-type">SelectOptions.WhereCondition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124356"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124361"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124358"><span class="hs-identifier hs-type">readEntity</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-270"></span><span id="findOneWhere"><span class="annot"><span class="annottext">findOneWhere :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; WhereCondition
-&gt; Plan scope fieldValue readEntity
</span><a href="Orville.PostgreSQL.Plan.html#findOneWhere"><span class="hs-identifier hs-var hs-var">findOneWhere</span></a></span></span><span> </span><span id="local-6989586621679124355"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124355"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124354"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124354"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span id="local-6989586621679124353"><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124353"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="annottext">(fieldValue -&gt; Maybe readEntity -&gt; Either String readEntity)
-&gt; Plan scope fieldValue (Maybe readEntity)
-&gt; Plan scope fieldValue readEntity
forall param a b scope.
(param -&gt; a -&gt; Either String b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; fieldValue
-&gt; Maybe readEntity
-&gt; Either String readEntity
forall fieldValue key writeEntity readEntity nullability result.
Show fieldValue =&gt;
TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; fieldValue
-&gt; Maybe result
-&gt; Either String result
</span><a href="Orville.PostgreSQL.Plan.html#assertFound"><span class="hs-identifier hs-var">assertFound</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124355"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124354"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; WhereCondition
-&gt; Plan scope fieldValue (Maybe readEntity)
forall fieldValue key writeEntity readEntity nullability scope.
Ord fieldValue =&gt;
TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; WhereCondition
-&gt; Plan scope fieldValue (Maybe readEntity)
</span><a href="Orville.PostgreSQL.Plan.html#findMaybeOneWhere"><span class="hs-identifier hs-var">findMaybeOneWhere</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124355"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124354"><span class="hs-identifier hs-var">fieldDef</span></a></span><span> </span><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124353"><span class="hs-identifier hs-var">cond</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">{- |
  'assertFound' is an internal helper that checks that row was found where
  one was expected.
-}</span><span>
</span><span id="line-279"></span><span id="local-6989586621679124703"><span id="local-6989586621679124704"><span id="local-6989586621679124705"><span id="local-6989586621679124706"><span id="local-6989586621679124707"><span id="local-6989586621679124708"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#assertFound"><span class="hs-identifier hs-type">assertFound</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-280"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679124708"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124707"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124706"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124705"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-282"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124704"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124708"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><a href="#local-6989586621679124708"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-284"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679124703"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679124703"><span class="hs-identifier hs-type">result</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-286"></span><span id="assertFound"><span class="annot"><span class="annottext">assertFound :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; fieldValue
-&gt; Maybe result
-&gt; Either String result
</span><a href="Orville.PostgreSQL.Plan.html#assertFound"><span class="hs-identifier hs-var hs-var">assertFound</span></a></span></span><span> </span><span id="local-6989586621679124352"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124352"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124351"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124351"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span id="local-6989586621679124350"><span class="annot"><span class="annottext">fieldValue
</span><a href="#local-6989586621679124350"><span class="hs-identifier hs-var">param</span></a></span></span><span> </span><span id="local-6989586621679124349"><span class="annot"><span class="annottext">Maybe result
</span><a href="#local-6989586621679124349"><span class="hs-identifier hs-var">maybeRecord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe result
</span><a href="#local-6989586621679124349"><span class="hs-identifier hs-var">maybeRecord</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679124348"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124348"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-289"></span><span>      </span><span class="annot"><span class="annottext">result -&gt; Either String result
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124348"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">Maybe result
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-291"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Either String result
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String result) -&gt; String -&gt; Either String result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-292"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unwords</span></span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to find record in table &quot;</span></span><span>
</span><span id="line-294"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableIdentifier -&gt; String
</span><a href="Orville.PostgreSQL.Internal.TableIdentifier.html#tableIdToString"><span class="hs-identifier hs-var">TableIdentifier.tableIdToString</span></a></span><span> </span><span class="annot"><span class="annottext">(TableIdentifier -&gt; String) -&gt; TableIdentifier -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity -&gt; TableIdentifier
forall key writeEntity readEntity.
TableDefinition key writeEntity readEntity -&gt; TableIdentifier
</span><a href="Orville.PostgreSQL.Internal.TableDefinition.html#tableIdentifier"><span class="hs-identifier hs-var">TableDefinition.tableIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124352"><span class="hs-identifier hs-var">tableDef</span></a></span><span>
</span><span id="line-295"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; where &quot;</span></span><span>
</span><span id="line-296"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; String
</span><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#fieldNameToString"><span class="hs-identifier hs-var">FieldDefinition.fieldNameToString</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldName -&gt; String) -&gt; FieldName -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue -&gt; FieldName
forall nullability a. FieldDefinition nullability a -&gt; FieldName
</span><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#fieldName"><span class="hs-identifier hs-var">FieldDefinition.fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124351"><span class="hs-identifier hs-var">fieldDef</span></a></span><span>
</span><span id="line-297"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; = &quot;</span></span><span>
</span><span id="line-298"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldValue -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">fieldValue
</span><a href="#local-6989586621679124350"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-299"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-comment">{- |
  'findAll' constructs a 'Plan' that will find all the rows from the given
  table there the plan's input value matches the given database field.
-}</span><span>
</span><span id="line-305"></span><span id="local-6989586621679124336"><span id="local-6989586621679124337"><span id="local-6989586621679124338"><span id="local-6989586621679124339"><span id="local-6989586621679124340"><span id="local-6989586621679124341"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findAll"><span class="hs-identifier hs-type">findAll</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124341"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124340"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124339"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124338"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124337"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124341"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124336"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124341"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124338"><span class="hs-identifier hs-type">readEntity</span></a></span><span class="hs-special">]</span></span></span></span></span></span></span><span>
</span><span id="line-310"></span><span id="findAll"><span class="annot"><span class="annottext">findAll :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; Plan scope fieldValue [readEntity]
</span><a href="Orville.PostgreSQL.Plan.html#findAll"><span class="hs-identifier hs-var hs-var">findAll</span></a></span></span><span> </span><span id="local-6989586621679124335"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124335"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124334"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124334"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="annottext">Operation fieldValue [readEntity]
-&gt; Plan scope fieldValue [readEntity]
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; WherePlanner fieldValue -&gt; Operation fieldValue [readEntity]
forall param key writeEntity readEntity.
Ord param =&gt;
TableDefinition key writeEntity readEntity
-&gt; WherePlanner param -&gt; Operation param [readEntity]
</span><a href="Orville.PostgreSQL.Plan.Operation.html#findAll"><span class="hs-identifier hs-var">Op.findAll</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124335"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
forall nullability fieldValue.
FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
</span><a href="Orville.PostgreSQL.Plan.Operation.html#byField"><span class="hs-identifier hs-var">Op.byField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124334"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-comment">{- |
  'findAllWhere' is similar to 'findAll', but allows a 'WhereCondition' to be
  specified to restrict which rows are matched by the database query.
-}</span><span>
</span><span id="line-317"></span><span id="local-6989586621679124327"><span id="local-6989586621679124328"><span id="local-6989586621679124329"><span id="local-6989586621679124330"><span id="local-6989586621679124331"><span id="local-6989586621679124332"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#findAllWhere"><span class="hs-identifier hs-type">findAllWhere</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-318"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679124332"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.TableDefinition.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition.TableDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124331"><span class="hs-identifier hs-type">key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124330"><span class="hs-identifier hs-type">writeEntity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124329"><span class="hs-identifier hs-type">readEntity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.FieldDefinition.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition.FieldDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124328"><span class="hs-identifier hs-type">nullability</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124332"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.SelectOptions.WhereCondition.html#WhereCondition"><span class="hs-identifier hs-type">SelectOptions.WhereCondition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124327"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124332"><span class="hs-identifier hs-type">fieldValue</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124329"><span class="hs-identifier hs-type">readEntity</span></a></span><span class="hs-special">]</span></span></span></span></span></span></span><span>
</span><span id="line-323"></span><span id="findAllWhere"><span class="annot"><span class="annottext">findAllWhere :: TableDefinition key writeEntity readEntity
-&gt; FieldDefinition nullability fieldValue
-&gt; WhereCondition
-&gt; Plan scope fieldValue [readEntity]
</span><a href="Orville.PostgreSQL.Plan.html#findAllWhere"><span class="hs-identifier hs-var hs-var">findAllWhere</span></a></span></span><span> </span><span id="local-6989586621679124326"><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124326"><span class="hs-identifier hs-var">tableDef</span></a></span></span><span> </span><span id="local-6989586621679124325"><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124325"><span class="hs-identifier hs-var">fieldDef</span></a></span></span><span> </span><span id="local-6989586621679124324"><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124324"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">Operation fieldValue [readEntity]
-&gt; Plan scope fieldValue [readEntity]
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#planOperation"><span class="hs-identifier hs-var">planOperation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
-&gt; WherePlanner fieldValue
-&gt; WhereCondition
-&gt; Operation fieldValue [readEntity]
forall param key writeEntity readEntity.
Ord param =&gt;
TableDefinition key writeEntity readEntity
-&gt; WherePlanner param
-&gt; WhereCondition
-&gt; Operation param [readEntity]
</span><a href="Orville.PostgreSQL.Plan.Operation.html#findAllWhere"><span class="hs-identifier hs-var">Op.findAllWhere</span></a></span><span> </span><span class="annot"><span class="annottext">TableDefinition key writeEntity readEntity
</span><a href="#local-6989586621679124326"><span class="hs-identifier hs-var">tableDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
forall nullability fieldValue.
FieldDefinition nullability fieldValue -&gt; WherePlanner fieldValue
</span><a href="Orville.PostgreSQL.Plan.Operation.html#byField"><span class="hs-identifier hs-var">Op.byField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition nullability fieldValue
</span><a href="#local-6989586621679124325"><span class="hs-identifier hs-var">fieldDef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereCondition
</span><a href="#local-6989586621679124324"><span class="hs-identifier hs-var">cond</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">{- |
  'planMany' adapts a plan that takes a single input parameter to work on
  multiple input parameters. When the new plan is executed each query will
  execute in the same basic order, but with adjusted conditions to find all the
  rows for all inputs at once rather than running the planned queries once for
  each input.
-}</span><span>
</span><span id="line-333"></span><span id="local-6989586621679124320"><span id="local-6989586621679124321"><span id="local-6989586621679124322"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planMany"><span class="hs-identifier hs-type">planMany</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679124645"><span class="annot"><a href="#local-6989586621679124645"><span class="hs-identifier hs-type">manyScope</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124645"><span class="hs-identifier hs-type">manyScope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124322"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124321"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124320"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124322"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier hs-type">Many</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124322"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124321"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-336"></span><span id="planMany"><span class="annot"><span class="annottext">planMany :: (forall manyScope. Plan manyScope param result)
-&gt; Plan scope [param] (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#planMany"><span class="hs-identifier hs-var hs-var">planMany</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="annottext">(forall manyScope. Plan manyScope param result)
-&gt; Plan scope [param] (Many param result)
forall param result scope.
(forall manyScope. Plan manyScope param result)
-&gt; Plan scope [param] (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#PlanMany"><span class="hs-identifier hs-var">PlanMany</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">{- |
  'planList' lifts a plan so both its param and result become lists.
  This saves you from having to fmap in 'Many.elems' when all you want back
  from a 'Many' is the list of results inside it.
-}</span><span>
</span><span id="line-344"></span><span id="local-6989586621679124317"><span id="local-6989586621679124318"><span id="local-6989586621679124319"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planList"><span class="hs-identifier hs-type">planList</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679124637"><span class="annot"><a href="#local-6989586621679124637"><span class="hs-identifier hs-type">scope</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124637"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124319"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124318"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-346"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124317"><span class="hs-identifier hs-type">listScope</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124319"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124318"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-347"></span><span id="planList"><span class="annot"><span class="annottext">planList :: (forall scope. Plan scope param result)
-&gt; Plan listScope [param] [result]
</span><a href="Orville.PostgreSQL.Plan.html#planList"><span class="hs-identifier hs-var hs-var">planList</span></a></span></span><span> </span><span id="local-6989586621679124316"><span class="annot"><span class="annottext">forall scope. Plan scope param result
</span><a href="#local-6989586621679124316"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><span class="annottext">Many param result -&gt; [result]
forall k a. Many k a -&gt; [a]
</span><a href="Orville.PostgreSQL.Plan.Many.html#elems"><span class="hs-identifier hs-var">Many.elems</span></a></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; [result])
-&gt; Plan listScope [param] (Many param result)
-&gt; Plan listScope [param] [result]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(forall scope. Plan scope param result)
-&gt; Plan listScope [param] (Many param result)
forall param result scope.
(forall manyScope. Plan manyScope param result)
-&gt; Plan scope [param] (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#planMany"><span class="hs-identifier hs-var">planMany</span></a></span><span> </span><span class="annot"><span class="annottext">forall scope. Plan scope param result
</span><a href="#local-6989586621679124316"><span class="hs-identifier hs-var">plan</span></a></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-comment">{- |
  'focusParam' builds a plan from a function and an existing plan taking the
  result of that function as input. This is especially useful when there is some
  structure, and a plan that only needs a part of that structure as input. The
  function argument can access part of the structure for the plan argument to use,
  so the final returned plan can take the entire structure as input.
-}</span><span>
</span><span id="line-357"></span><span id="local-6989586621679124602"><span id="local-6989586621679124603"><span id="local-6989586621679124604"><span id="local-6989586621679124605"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#focusParam"><span class="hs-identifier hs-type">focusParam</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679124605"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124604"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124603"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124604"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124602"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124603"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124605"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124602"><span class="hs-identifier hs-type">result</span></a></span></span></span></span></span><span>
</span><span id="line-361"></span><span id="focusParam"><span class="annot"><span class="annottext">focusParam :: (a -&gt; b) -&gt; Plan scope b result -&gt; Plan scope a result
</span><a href="Orville.PostgreSQL.Plan.html#focusParam"><span class="hs-identifier hs-var hs-var">focusParam</span></a></span></span><span> </span><span id="local-6989586621679124313"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124313"><span class="hs-identifier hs-var">focuser</span></a></span></span><span> </span><span id="local-6989586621679124312"><span class="annot"><span class="annottext">Plan scope b result
</span><a href="#local-6989586621679124312"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-362"></span><span>  </span><span class="annot"><span class="annottext">Plan scope a b -&gt; Plan scope b result -&gt; Plan scope a result
forall scope a b c.
Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
</span><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier hs-var">chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679124313"><span class="hs-identifier hs-var">focuser</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Plan scope a a -&gt; Plan scope a b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan scope a a
forall scope param. Plan scope param param
</span><a href="Orville.PostgreSQL.Plan.html#askParam"><span class="hs-identifier hs-var">askParam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Plan scope b result
</span><a href="#local-6989586621679124312"><span class="hs-identifier hs-var">plan</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-comment">{- |
  'planEither' lets you construct a plan that branches by executing a different
  plan for the 'Left' and 'Right' sides of an 'Either' value. When used with a
  single input parameter only one of the two plans will be used, based on the
  input parameter. When used on multiple input parameters, each of the two
  plans will be executed only once with all the 'Left' and 'Right' values
  provided as input parameters respectively.
-}</span><span>
</span><span id="line-372"></span><span id="local-6989586621679124307"><span id="local-6989586621679124308"><span id="local-6989586621679124309"><span id="local-6989586621679124310"><span id="local-6989586621679124311"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planEither"><span class="hs-identifier hs-type">planEither</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124311"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124310"><span class="hs-identifier hs-type">leftParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124309"><span class="hs-identifier hs-type">leftResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124311"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124308"><span class="hs-identifier hs-type">rightParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124307"><span class="hs-identifier hs-type">rightResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-375"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124311"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679124310"><span class="hs-identifier hs-type">leftParam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124308"><span class="hs-identifier hs-type">rightParam</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679124309"><span class="hs-identifier hs-type">leftResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124307"><span class="hs-identifier hs-type">rightResult</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-376"></span><span id="planEither"><span class="annot"><span class="annottext">planEither :: Plan scope leftParam leftResult
-&gt; Plan scope rightParam rightResult
-&gt; Plan
     scope (Either leftParam rightParam) (Either leftResult rightResult)
</span><a href="Orville.PostgreSQL.Plan.html#planEither"><span class="hs-identifier hs-var hs-var">planEither</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="annottext">Plan scope leftParam leftResult
-&gt; Plan scope rightParam rightResult
-&gt; Plan
     scope (Either leftParam rightParam) (Either leftResult rightResult)
forall scope leftParam leftResult rightParam a.
Plan scope leftParam leftResult
-&gt; Plan scope rightParam a
-&gt; Plan scope (Either leftParam rightParam) (Either leftResult a)
</span><a href="Orville.PostgreSQL.Plan.html#PlanEither"><span class="hs-identifier hs-var">PlanEither</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">{- |
  'planMaybe' lifts a plan so both its param and result become 'Maybe's. This is
  useful when modifying an existing plan to deal with optionality. Writing just
  one plan can then easily produce both the required and optional versions.
-}</span><span>
</span><span id="line-384"></span><span id="local-6989586621679124304"><span id="local-6989586621679124305"><span id="local-6989586621679124306"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#planMaybe"><span class="hs-identifier hs-type">planMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124306"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124305"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124304"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124306"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679124305"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679124304"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-385"></span><span id="planMaybe"><span class="annot"><span class="annottext">planMaybe :: Plan scope a b -&gt; Plan scope (Maybe a) (Maybe b)
</span><a href="Orville.PostgreSQL.Plan.html#planMaybe"><span class="hs-identifier hs-var hs-var">planMaybe</span></a></span></span><span> </span><span id="local-6989586621679124303"><span class="annot"><span class="annottext">Plan scope a b
</span><a href="#local-6989586621679124303"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><span class="annottext">(Maybe a -&gt; Either () a)
-&gt; Plan scope (Either () a) (Maybe b)
-&gt; Plan scope (Maybe a) (Maybe b)
forall a b scope result.
(a -&gt; b) -&gt; Plan scope b result -&gt; Plan scope a result
</span><a href="Orville.PostgreSQL.Plan.html#focusParam"><span class="hs-identifier hs-var">focusParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either () a -&gt; (a -&gt; Either () a) -&gt; Maybe a -&gt; Either () a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Either () a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either () a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Plan scope (Either () a) (Maybe b)
 -&gt; Plan scope (Maybe a) (Maybe b))
-&gt; Plan scope (Either () a) (Maybe b)
-&gt; Plan scope (Maybe a) (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="annottext">(Maybe b -&gt; Maybe b)
-&gt; (Maybe b -&gt; Maybe b) -&gt; Either (Maybe b) (Maybe b) -&gt; Maybe b
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">Maybe b -&gt; Maybe b
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Maybe b -&gt; Maybe b
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Either (Maybe b) (Maybe b) -&gt; Maybe b)
-&gt; Plan scope (Either () a) (Either (Maybe b) (Maybe b))
-&gt; Plan scope (Either () a) (Maybe b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan scope () (Maybe b)
-&gt; Plan scope a (Maybe b)
-&gt; Plan scope (Either () a) (Either (Maybe b) (Maybe b))
forall scope leftParam leftResult rightParam a.
Plan scope leftParam leftResult
-&gt; Plan scope rightParam a
-&gt; Plan scope (Either leftParam rightParam) (Either leftResult a)
</span><a href="Orville.PostgreSQL.Plan.html#planEither"><span class="hs-identifier hs-var">planEither</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe b -&gt; Plan scope () (Maybe b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; Maybe b) -&gt; Plan scope a b -&gt; Plan scope a (Maybe b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan scope a b
</span><a href="#local-6989586621679124303"><span class="hs-identifier hs-var">plan</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="hs-comment">{- |
  'bind' gives access to the results of a plan to use as input values to future
  plans. The plan result is given the input parameter to the provided function,
  which must produce the remaining 'Plan' to be executed. The value will be
  wrapped in the 'Planned' type, which may represent either a result or
  multiple results, depending on whether one plan is currently be executed with
  one and multiple input parameters. This ensures that the caller produces only
  a single remaining 'Plan' to be used for all inputs when there are multiple
  to eliminate the need to possibly run different queries for different inputs
  (which would an introduce N+1 query execution).

  The 'Planned' value (or values) provided by 'bind' have actually been
  retrieved from the database, so the value can be used multiple times when
  constructing the remaining 'Plan' without fear of causing the query to run
  multiple times.

  Also see 'use' for how to lift a 'Planned' value back into a 'Plan'.
-}</span><span>
</span><span id="line-407"></span><span id="local-6989586621679124296"><span id="local-6989586621679124297"><span id="local-6989586621679124298"><span id="local-6989586621679124299"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#bind"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124298"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124297"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124298"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124297"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124298"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124296"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124298"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124296"><span class="hs-identifier hs-type">result</span></a></span></span></span></span></span><span>
</span><span id="line-411"></span><span id="bind"><span class="annot"><span class="annottext">bind :: Plan scope param a
-&gt; (Planned scope param a -&gt; Plan scope param result)
-&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#bind"><span class="hs-identifier hs-var hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>  </span><span class="annot"><span class="annottext">Plan scope param a
-&gt; (Planned scope param a -&gt; Plan scope param result)
-&gt; Plan scope param result
forall scope param a result.
Plan scope param a
-&gt; (Planned scope param a -&gt; Plan scope param result)
-&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#Bind"><span class="hs-identifier hs-var">Bind</span></a></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-comment">{- |
  'use' constructs a 'Plan' that always produces the 'Planned' value
  as its result, regardless of the parameter given as input to the plan.
-}</span><span>
</span><span id="line-418"></span><span id="local-6989586621679124293"><span id="local-6989586621679124294"><span id="local-6989586621679124295"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#use"><span class="hs-identifier hs-type">use</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124295"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124294"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124293"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124295"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124294"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124293"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-419"></span><span id="use"><span class="annot"><span class="annottext">use :: Planned scope param a -&gt; Plan scope param a
</span><a href="Orville.PostgreSQL.Plan.html#use"><span class="hs-identifier hs-var hs-var">use</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-420"></span><span>  </span><span class="annot"><span class="annottext">Planned scope param a -&gt; Plan scope param a
forall scope param a. Planned scope param a -&gt; Plan scope param a
</span><a href="Orville.PostgreSQL.Plan.html#Use"><span class="hs-identifier hs-var">Use</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="hs-comment">{- |
  'using' uses a 'Planned' value in the input to another 'Plan'. The
  resulting plan will ignore its input and use the 'Planned' value as
  the input to produce its result instead.
-}</span><span>
</span><span id="line-427"></span><span id="local-6989586621679124289"><span id="local-6989586621679124290"><span id="local-6989586621679124291"><span id="local-6989586621679124292"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#using"><span class="hs-identifier hs-type">using</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-428"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Planned"><span class="hs-identifier hs-type">Planned</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124292"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124291"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-429"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124292"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124289"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124292"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124291"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124289"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-431"></span><span id="using"><span class="annot"><span class="annottext">using :: Planned scope param a -&gt; Plan scope a b -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#using"><span class="hs-identifier hs-var hs-var">using</span></a></span></span><span> </span><span id="local-6989586621679124288"><span class="annot"><span class="annottext">Planned scope param a
</span><a href="#local-6989586621679124288"><span class="hs-identifier hs-var">planned</span></a></span></span><span> </span><span id="local-6989586621679124287"><span class="annot"><span class="annottext">Plan scope a b
</span><a href="#local-6989586621679124287"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="annottext">Plan scope param a -&gt; Plan scope a b -&gt; Plan scope param b
forall scope a b c.
Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
</span><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier hs-var">chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Planned scope param a -&gt; Plan scope param a
forall scope param a. Planned scope param a -&gt; Plan scope param a
</span><a href="Orville.PostgreSQL.Plan.html#use"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">Planned scope param a
</span><a href="#local-6989586621679124288"><span class="hs-identifier hs-var">planned</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Plan scope a b
</span><a href="#local-6989586621679124287"><span class="hs-identifier hs-var">plan</span></a></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">{- |
  'apply' applies a function produced by a plan to the value produced
  by another plan. This is usually used via the '&lt;*&gt;' operator through
  the 'Applicative' instance for 'Plan'.
-}</span><span>
</span><span id="line-439"></span><span id="local-6989586621679124283"><span id="local-6989586621679124284"><span id="local-6989586621679124285"><span id="local-6989586621679124286"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#apply"><span class="hs-identifier hs-type">apply</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124286"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124285"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679124284"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124283"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-441"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124286"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124285"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124284"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124286"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124285"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124283"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-443"></span><span id="apply"><span class="annot"><span class="annottext">apply :: Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#apply"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><span class="annottext">Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
forall scope param a b.
Plan scope param (a -&gt; b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-comment">{- |
  'chain' connects the output of one plan to the input of another to form a
  larger plan that will execute the first followed by the second.
-}</span><span>
</span><span id="line-450"></span><span id="local-6989586621679124621"><span id="local-6989586621679124622"><span id="local-6989586621679124623"><span id="local-6989586621679124624"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier hs-type">chain</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124624"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124623"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124622"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124624"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124622"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124621"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-453"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124624"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124623"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124621"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-454"></span><span id="chain"><span class="annot"><span class="annottext">chain :: Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
</span><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier hs-var hs-var">chain</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-455"></span><span>  </span><span class="annot"><span class="annottext">Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
forall scope a b c.
Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
</span><a href="Orville.PostgreSQL.Plan.html#Chain"><span class="hs-identifier hs-var">Chain</span></a></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="hs-comment">{- |
  'assert' allows you to make an assertion about a plans result that will throw
  an 'Op.AssertionFailed' failed exception during execution if it proves to be
  false. The first parameter is the assertion function, which should return
  either an error message to be given in the exception or the value to be used
  as the plan's result.
-}</span><span>
</span><span id="line-464"></span><span id="local-6989586621679124709"><span id="local-6989586621679124710"><span id="local-6989586621679124711"><span id="local-6989586621679124712"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#assert"><span class="hs-identifier hs-type">assert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679124712"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679124711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="#local-6989586621679124710"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-466"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124709"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124712"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-467"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124709"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124712"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124710"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-468"></span><span id="assert"><span class="annot"><span class="annottext">assert :: (param -&gt; a -&gt; Either String b)
-&gt; Plan scope param a -&gt; Plan scope param b
</span><a href="Orville.PostgreSQL.Plan.html#assert"><span class="hs-identifier hs-var hs-var">assert</span></a></span></span><span> </span><span id="local-6989586621679124282"><span class="annot"><span class="annottext">param -&gt; a -&gt; Either String b
</span><a href="#local-6989586621679124282"><span class="hs-identifier hs-var">assertion</span></a></span></span><span> </span><span id="local-6989586621679124281"><span class="annot"><span class="annottext">Plan scope param a
</span><a href="#local-6989586621679124281"><span class="hs-identifier hs-var">aPlan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679124280"><span class="annot"><span class="annottext">eitherPlan :: Plan scope param (Either String b)
</span><a href="#local-6989586621679124280"><span class="hs-identifier hs-var hs-var">eitherPlan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-470"></span><span>        </span><span class="annot"><span class="annottext">param -&gt; a -&gt; Either String b
</span><a href="#local-6989586621679124282"><span class="hs-identifier hs-var">assertion</span></a></span><span>
</span><span id="line-471"></span><span>          </span><span class="annot"><span class="annottext">(param -&gt; a -&gt; Either String b)
-&gt; Plan scope param param
-&gt; Plan scope param (a -&gt; Either String b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan scope param param
forall scope param. Plan scope param param
</span><a href="Orville.PostgreSQL.Plan.html#askParam"><span class="hs-identifier hs-var">askParam</span></a></span><span>
</span><span id="line-472"></span><span>          </span><span class="annot"><span class="annottext">Plan scope param (a -&gt; Either String b)
-&gt; Plan scope param a -&gt; Plan scope param (Either String b)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan scope param a
</span><a href="#local-6989586621679124281"><span class="hs-identifier hs-var">aPlan</span></a></span><span>
</span><span id="line-473"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Plan scope param (Either String b)
-&gt; Plan scope (Either String b) b -&gt; Plan scope param b
forall scope a b c.
Plan scope a b -&gt; Plan scope b c -&gt; Plan scope a c
</span><a href="Orville.PostgreSQL.Plan.html#chain"><span class="hs-identifier hs-var">chain</span></a></span><span> </span><span class="annot"><span class="annottext">Plan scope param (Either String b)
</span><a href="#local-6989586621679124280"><span class="hs-identifier hs-var">eitherPlan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Operation (Either String b) b -&gt; Plan scope (Either String b) b
forall param result scope.
Operation param result -&gt; Plan scope param result
</span><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-var">PlanOp</span></a></span><span> </span><span class="annot"><span class="annottext">Operation (Either String b) b
forall a. Operation (Either String a) a
</span><a href="Orville.PostgreSQL.Plan.Operation.html#assertRight"><span class="hs-identifier hs-var">Op.assertRight</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="hs-comment">{- |
  'execute' accepts the input parameter (or parameters) expected by a 'Plan'
  and runs the plan to completion, either throwing an 'Op.AssertionFailed'
  exception in the monad 'm' or producing the expected result.

  If you have a plan that takes one input and want to provide a list of
  input, use 'planMany' to adapt it to a multple-input plan before calling
  'execute'.
-}</span><span>
</span><span id="line-484"></span><span id="local-6989586621679124276"><span id="local-6989586621679124277"><span id="local-6989586621679124278"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#execute"><span class="hs-identifier hs-type">execute</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-485"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.MonadOrville.html#MonadOrville"><span class="hs-identifier hs-type">MonadOrville.MonadOrville</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124278"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-486"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier hs-type">Execute</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124277"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124276"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-487"></span><span>  </span><span class="annot"><a href="#local-6989586621679124277"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-488"></span><span>  </span><span class="annot"><a href="#local-6989586621679124278"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124276"><span class="hs-identifier hs-type">result</span></a></span></span></span></span><span>
</span><span id="line-489"></span><span id="execute"><span class="annot"><span class="annottext">execute :: Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#execute"><span class="hs-identifier hs-var hs-var">execute</span></a></span></span><span> </span><span id="local-6989586621679124275"><span class="annot"><span class="annottext">Plan Execute param result
</span><a href="#local-6989586621679124275"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span id="local-6989586621679124274"><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124274"><span class="hs-identifier hs-var">param</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>  </span><span class="annot"><span class="annottext">Plan Execute param result -&gt; param -&gt; m result
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute param result
</span><a href="#local-6989586621679124275"><span class="hs-identifier hs-var">plan</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124274"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">{- |
  'executeOne' is an internal helper that executes a 'Plan' with a concrete
  'scope' type to ensure all 'Planned' values are built with 'PlannedOne'.
-}</span><span>
</span><span id="line-496"></span><span id="local-6989586621679124558"><span id="local-6989586621679124559"><span id="local-6989586621679124561"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-type">executeOne</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-497"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.MonadOrville.html#MonadOrville"><span class="hs-identifier hs-type">MonadOrville.MonadOrville</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-498"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Execute"><span class="hs-identifier hs-type">Execute</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124559"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124558"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><a href="#local-6989586621679124559"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><a href="#local-6989586621679124561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124558"><span class="hs-identifier hs-type">result</span></a></span></span></span></span><span>
</span><span id="line-501"></span><span id="executeOne"><span class="annot"><span class="annottext">executeOne :: Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var hs-var">executeOne</span></a></span></span><span> </span><span id="local-6989586621679124272"><span class="annot"><span class="annottext">Plan Execute param result
</span><a href="#local-6989586621679124272"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span id="local-6989586621679124271"><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-502"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Plan Execute param result
</span><a href="#local-6989586621679124272"><span class="hs-identifier hs-var">plan</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-type">PlanOp</span></a></span><span> </span><span id="local-6989586621679124270"><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124270"><span class="hs-identifier hs-var">operation</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-504"></span><span>      </span><span id="local-6989586621679124269"><span class="annot"><span class="annottext">Either AssertionFailed result
</span><a href="#local-6989586621679124269"><span class="hs-identifier hs-var">opResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Operation param result
-&gt; param -&gt; m (Either AssertionFailed result)
forall param result.
Operation param result
-&gt; forall (m :: * -&gt; *).
   MonadOrville m =&gt;
   param -&gt; m (Either AssertionFailed result)
</span><a href="Orville.PostgreSQL.Plan.Operation.html#executeOperationOne"><span class="hs-identifier hs-var hs-var">Op.executeOperationOne</span></a></span><span> </span><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124270"><span class="hs-identifier hs-var">operation</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either AssertionFailed result
</span><a href="#local-6989586621679124269"><span class="hs-identifier hs-var">opResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-507"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679124267"><span class="annot"><span class="annottext">AssertionFailed
</span><a href="#local-6989586621679124267"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-508"></span><span>          </span><span class="annot"><span class="annottext">IO result -&gt; m result
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">MIO.liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssertionFailed -&gt; IO result
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">AssertionFailed
</span><a href="#local-6989586621679124267"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679124265"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124265"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-510"></span><span>          </span><span class="annot"><span class="annottext">result -&gt; m result
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124265"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanMany"><span class="hs-identifier hs-type">PlanMany</span></a></span><span> </span><span id="local-6989586621679124264"><span class="annot"><span class="annottext">forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124264"><span class="hs-identifier hs-var">manyPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-512"></span><span>      </span><span class="annot"><span class="annottext">Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param result
forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124264"><span class="hs-identifier hs-var">manyPlan</span></a></span><span> </span><span class="annot"><span class="annottext">param
[param]
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanEither"><span class="hs-identifier hs-type">PlanEither</span></a></span><span> </span><span id="local-6989586621679124262"><span class="annot"><span class="annottext">Plan Execute leftParam leftResult
</span><a href="#local-6989586621679124262"><span class="hs-identifier hs-var">leftPlan</span></a></span></span><span> </span><span id="local-6989586621679124261"><span class="annot"><span class="annottext">Plan Execute rightParam rightResult
</span><a href="#local-6989586621679124261"><span class="hs-identifier hs-var">rightPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-514"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-515"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679124260"><span class="annot"><a href="#local-6989586621679124260"><span class="hs-identifier hs-var">leftParam</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="annottext">leftResult -&gt; Either leftResult rightResult
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(leftResult -&gt; Either leftResult rightResult)
-&gt; m leftResult -&gt; m (Either leftResult rightResult)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan Execute leftParam leftResult -&gt; leftParam -&gt; m leftResult
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute leftParam leftResult
</span><a href="#local-6989586621679124262"><span class="hs-identifier hs-var">leftPlan</span></a></span><span> </span><span class="annot"><span class="annottext">leftParam
</span><a href="#local-6989586621679124260"><span class="hs-identifier hs-var">leftParam</span></a></span><span>
</span><span id="line-517"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679124259"><span class="annot"><a href="#local-6989586621679124259"><span class="hs-identifier hs-var">rightParam</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-518"></span><span>          </span><span class="annot"><span class="annottext">rightResult -&gt; Either leftResult rightResult
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(rightResult -&gt; Either leftResult rightResult)
-&gt; m rightResult -&gt; m (Either leftResult rightResult)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan Execute rightParam rightResult -&gt; rightParam -&gt; m rightResult
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute rightParam rightResult
</span><a href="#local-6989586621679124261"><span class="hs-identifier hs-var">rightPlan</span></a></span><span> </span><span class="annot"><span class="annottext">rightParam
</span><a href="#local-6989586621679124259"><span class="hs-identifier hs-var">rightParam</span></a></span><span>
</span><span id="line-519"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span id="local-6989586621679124258"><span class="annot"><span class="annottext">Plan Execute param a
</span><a href="#local-6989586621679124258"><span class="hs-identifier hs-var">intermPlan</span></a></span></span><span> </span><span id="local-6989586621679124257"><span class="annot"><span class="annottext">Planned Execute param a -&gt; Plan Execute param result
</span><a href="#local-6989586621679124257"><span class="hs-identifier hs-var">continue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-520"></span><span>      </span><span id="local-6989586621679124256"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124256"><span class="hs-identifier hs-var">interm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan Execute param a -&gt; param -&gt; m a
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute param a
</span><a href="#local-6989586621679124258"><span class="hs-identifier hs-var">intermPlan</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-521"></span><span>      </span><span class="annot"><span class="annottext">Plan Execute param result -&gt; param -&gt; m result
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span>
</span><span id="line-522"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Planned Execute param a -&gt; Plan Execute param result
</span><a href="#local-6989586621679124257"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Planned Execute param a
forall a param. a -&gt; Planned Execute param a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedOne"><span class="hs-identifier hs-var">PlannedOne</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679124256"><span class="hs-identifier hs-var">interm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>        </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Use"><span class="hs-identifier hs-type">Use</span></a></span><span> </span><span id="local-6989586621679124255"><span class="annot"><span class="annottext">Planned Execute param result
</span><a href="#local-6989586621679124255"><span class="hs-identifier hs-var">planned</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-525"></span><span>      </span><span class="annot"><span class="annottext">result -&gt; m result
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(result -&gt; m result)
-&gt; (Planned Execute param result -&gt; result)
-&gt; Planned Execute param result
-&gt; m result
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Planned Execute param result -&gt; result
forall param a. Planned Execute param a -&gt; a
</span><a href="Orville.PostgreSQL.Plan.html#resolveOne"><span class="hs-identifier hs-var">resolveOne</span></a></span><span> </span><span class="annot"><span class="annottext">(Planned Execute param result -&gt; m result)
-&gt; Planned Execute param result -&gt; m result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Planned Execute param result
</span><a href="#local-6989586621679124255"><span class="hs-identifier hs-var">planned</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span> </span><span id="local-6989586621679124253"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124253"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>      </span><span class="annot"><span class="annottext">result -&gt; m result
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124253"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-528"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621679124252"><span class="annot"><span class="annottext">Plan Execute param (a -&gt; result)
</span><a href="#local-6989586621679124252"><span class="hs-identifier hs-var">planF</span></a></span></span><span> </span><span id="local-6989586621679124251"><span class="annot"><span class="annottext">Plan Execute param a
</span><a href="#local-6989586621679124251"><span class="hs-identifier hs-var">planA</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-529"></span><span>      </span><span class="annot"><span class="annottext">Plan Execute param (a -&gt; result) -&gt; param -&gt; m (a -&gt; result)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute param (a -&gt; result)
</span><a href="#local-6989586621679124252"><span class="hs-identifier hs-var">planF</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span> </span><span class="annot"><span class="annottext">m (a -&gt; result) -&gt; m a -&gt; m result
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Plan Execute param a -&gt; param -&gt; m a
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute param a
</span><a href="#local-6989586621679124251"><span class="hs-identifier hs-var">planA</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-530"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Chain"><span class="hs-identifier hs-type">Chain</span></a></span><span> </span><span id="local-6989586621679124250"><span class="annot"><span class="annottext">Plan Execute param b
</span><a href="#local-6989586621679124250"><span class="hs-identifier hs-var">planAB</span></a></span></span><span> </span><span id="local-6989586621679124249"><span class="annot"><span class="annottext">Plan Execute b result
</span><a href="#local-6989586621679124249"><span class="hs-identifier hs-var">planBC</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-531"></span><span>      </span><span id="local-6989586621679124248"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679124248"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan Execute param b -&gt; param -&gt; m b
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute param b
</span><a href="#local-6989586621679124250"><span class="hs-identifier hs-var">planAB</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124271"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-532"></span><span>      </span><span class="annot"><span class="annottext">Plan Execute b result -&gt; b -&gt; m result
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan Execute param result -&gt; param -&gt; m result
</span><a href="Orville.PostgreSQL.Plan.html#executeOne"><span class="hs-identifier hs-var">executeOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Execute b result
</span><a href="#local-6989586621679124249"><span class="hs-identifier hs-var">planBC</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679124248"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="hs-comment">{- |
  'executeMany' is an internal helper that executes a 'Plan' with a concrete
  @scope@ type to ensure all 'Planned' values are built with 'PlannedMany'.
-}</span><span>
</span><span id="line-538"></span><span id="local-6989586621679124540"><span id="local-6989586621679124541"><span id="local-6989586621679124542"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-type">executeMany</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-539"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Internal.MonadOrville.html#MonadOrville"><span class="hs-identifier hs-type">MonadOrville.MonadOrville</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124542"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExecuteMany"><span class="hs-identifier hs-type">ExecuteMany</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124541"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124540"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-541"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679124541"><span class="hs-identifier hs-type">param</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-542"></span><span>  </span><span class="annot"><a href="#local-6989586621679124542"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Orville.PostgreSQL.Plan.Many.html#Many"><span class="hs-identifier hs-type">Many.Many</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124541"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124540"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-543"></span><span id="executeMany"><span class="annot"><span class="annottext">executeMany :: Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var hs-var">executeMany</span></a></span></span><span> </span><span id="local-6989586621679124247"><span class="annot"><span class="annottext">Plan ExecuteMany param result
</span><a href="#local-6989586621679124247"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span id="local-6989586621679124246"><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param result
</span><a href="#local-6989586621679124247"><span class="hs-identifier hs-var">plan</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-type">PlanOp</span></a></span><span> </span><span id="local-6989586621679124245"><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124245"><span class="hs-identifier hs-var">operation</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-546"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[param] -&gt; Maybe (NonEmpty param)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-547"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty param)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-548"></span><span>          </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; m (Many param result))
-&gt; Many param result -&gt; m (Many param result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[param] -&gt; (param -&gt; Either NotAKey result) -&gt; Many param result
forall k a. [k] -&gt; (k -&gt; Either NotAKey a) -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.Many.html#fromKeys"><span class="hs-identifier hs-var">Many.fromKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either NotAKey result -&gt; param -&gt; Either NotAKey result
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either NotAKey result -&gt; param -&gt; Either NotAKey result)
-&gt; Either NotAKey result -&gt; param -&gt; Either NotAKey result
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotAKey -&gt; Either NotAKey result
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">NotAKey
</span><a href="Orville.PostgreSQL.Plan.Many.html#NotAKey"><span class="hs-identifier hs-var">Many.NotAKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679124240"><span class="annot"><span class="annottext">NonEmpty param
</span><a href="#local-6989586621679124240"><span class="hs-identifier hs-var">nonEmptyParams</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-550"></span><span>          </span><span id="local-6989586621679124239"><span class="annot"><span class="annottext">Either AssertionFailed (Many param result)
</span><a href="#local-6989586621679124239"><span class="hs-identifier hs-var">opResult</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Operation param result
-&gt; NonEmpty param -&gt; m (Either AssertionFailed (Many param result))
forall param result.
Operation param result
-&gt; forall (m :: * -&gt; *).
   MonadOrville m =&gt;
   NonEmpty param -&gt; m (Either AssertionFailed (Many param result))
</span><a href="Orville.PostgreSQL.Plan.Operation.html#executeOperationMany"><span class="hs-identifier hs-var hs-var">Op.executeOperationMany</span></a></span><span> </span><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124245"><span class="hs-identifier hs-var">operation</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty param
</span><a href="#local-6989586621679124240"><span class="hs-identifier hs-var">nonEmptyParams</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either AssertionFailed (Many param result)
</span><a href="#local-6989586621679124239"><span class="hs-identifier hs-var">opResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679124237"><span class="annot"><span class="annottext">AssertionFailed
</span><a href="#local-6989586621679124237"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-554"></span><span>              </span><span class="annot"><span class="annottext">IO (Many param result) -&gt; m (Many param result)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">MIO.liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssertionFailed -&gt; IO (Many param result)
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">AssertionFailed
</span><a href="#local-6989586621679124237"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679124236"><span class="annot"><span class="annottext">Many param result
</span><a href="#local-6989586621679124236"><span class="hs-identifier hs-var">results</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-556"></span><span>              </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Many param result
</span><a href="#local-6989586621679124236"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-557"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanMany"><span class="hs-identifier hs-type">PlanMany</span></a></span><span> </span><span id="local-6989586621679124235"><span class="annot"><span class="annottext">forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124235"><span class="hs-identifier hs-var">manyPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-558"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679124234"><span class="annot"><span class="annottext">flatParams :: [param]
</span><a href="#local-6989586621679124234"><span class="hs-identifier hs-var hs-var">flatParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[param]] -&gt; [param]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[param]
[[param]]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span>      </span><span id="local-6989586621679124232"><span class="annot"><span class="annottext">Many param result
</span><a href="#local-6989586621679124232"><span class="hs-identifier hs-var">allResults</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param result
forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124235"><span class="hs-identifier hs-var">manyPlan</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124234"><span class="hs-identifier hs-var">flatParams</span></a></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679124231"><span class="annot"><span class="annottext">restrictResults :: [param] -&gt; Many param result
</span><a href="#local-6989586621679124231"><span class="hs-identifier hs-var hs-var">restrictResults</span></a></span></span><span> </span><span id="local-6989586621679124230"><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124230"><span class="hs-identifier hs-var">subParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-563"></span><span>            </span><span class="annot"><span class="annottext">[param] -&gt; (param -&gt; Either NotAKey result) -&gt; Many param result
forall k a. [k] -&gt; (k -&gt; Either NotAKey a) -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.Many.html#fromKeys"><span class="hs-identifier hs-var">Many.fromKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124230"><span class="hs-identifier hs-var">subParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679124229"><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124229"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">param -&gt; Many param result -&gt; Either NotAKey result
forall k a. k -&gt; Many k a -&gt; Either NotAKey a
</span><a href="Orville.PostgreSQL.Plan.Many.html#lookup"><span class="hs-identifier hs-var">Many.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">param
</span><a href="#local-6989586621679124229"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Many param result
</span><a href="#local-6989586621679124232"><span class="hs-identifier hs-var">allResults</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span>      </span><span class="annot"><span class="annottext">Many param (Many param result)
-&gt; m (Many param (Many param result))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param (Many param result)
 -&gt; m (Many param (Many param result)))
-&gt; Many param (Many param result)
-&gt; m (Many param (Many param result))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[param]
-&gt; (param -&gt; Either NotAKey (Many param result))
-&gt; Many param (Many param result)
forall k a. [k] -&gt; (k -&gt; Either NotAKey a) -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.Many.html#fromKeys"><span class="hs-identifier hs-var">Many.fromKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Many param result -&gt; Either NotAKey (Many param result)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; Either NotAKey (Many param result))
-&gt; ([param] -&gt; Many param result)
-&gt; [param]
-&gt; Either NotAKey (Many param result)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[param] -&gt; Many param result
</span><a href="#local-6989586621679124231"><span class="hs-identifier hs-var">restrictResults</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanEither"><span class="hs-identifier hs-type">PlanEither</span></a></span><span> </span><span id="local-6989586621679124227"><span class="annot"><span class="annottext">Plan ExecuteMany leftParam leftResult
</span><a href="#local-6989586621679124227"><span class="hs-identifier hs-var">leftPlan</span></a></span></span><span> </span><span id="local-6989586621679124226"><span class="annot"><span class="annottext">Plan ExecuteMany rightParam rightResult
</span><a href="#local-6989586621679124226"><span class="hs-identifier hs-var">rightPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-567"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679124225"><span class="annot"><span class="annottext">[leftParam]
</span><a href="#local-6989586621679124225"><span class="hs-identifier hs-var">leftParams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679124224"><span class="annot"><span class="annottext">[rightParam]
</span><a href="#local-6989586621679124224"><span class="hs-identifier hs-var">rightParams</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either leftParam rightParam] -&gt; ([leftParam], [rightParam])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">[param]
[Either leftParam rightParam]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span>      </span><span id="local-6989586621679124223"><span class="annot"><span class="annottext">Many leftParam leftResult
</span><a href="#local-6989586621679124223"><span class="hs-identifier hs-var">leftResults</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany leftParam leftResult
-&gt; [leftParam] -&gt; m (Many leftParam leftResult)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany leftParam leftResult
</span><a href="#local-6989586621679124227"><span class="hs-identifier hs-var">leftPlan</span></a></span><span> </span><span class="annot"><span class="annottext">[leftParam]
</span><a href="#local-6989586621679124225"><span class="hs-identifier hs-var">leftParams</span></a></span><span>
</span><span id="line-570"></span><span>      </span><span id="local-6989586621679124222"><span class="annot"><span class="annottext">Many rightParam rightResult
</span><a href="#local-6989586621679124222"><span class="hs-identifier hs-var">rightResults</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany rightParam rightResult
-&gt; [rightParam] -&gt; m (Many rightParam rightResult)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany rightParam rightResult
</span><a href="#local-6989586621679124226"><span class="hs-identifier hs-var">rightPlan</span></a></span><span> </span><span class="annot"><span class="annottext">[rightParam]
</span><a href="#local-6989586621679124224"><span class="hs-identifier hs-var">rightParams</span></a></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679124221"><span class="annot"><span class="annottext">eitherResult :: Either leftParam rightParam
-&gt; Either NotAKey (Either leftResult rightResult)
</span><a href="#local-6989586621679124221"><span class="hs-identifier hs-var hs-var">eitherResult</span></a></span></span><span> </span><span id="local-6989586621679124220"><span class="annot"><span class="annottext">Either leftParam rightParam
</span><a href="#local-6989586621679124220"><span class="hs-identifier hs-var">eitherK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-573"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either leftParam rightParam
</span><a href="#local-6989586621679124220"><span class="hs-identifier hs-var">eitherK</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-574"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679124219"><span class="annot"><span class="annottext">leftParam
</span><a href="#local-6989586621679124219"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-575"></span><span>                </span><span class="annot"><span class="annottext">leftResult -&gt; Either leftResult rightResult
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(leftResult -&gt; Either leftResult rightResult)
-&gt; Either NotAKey leftResult
-&gt; Either NotAKey (Either leftResult rightResult)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">leftParam -&gt; Many leftParam leftResult -&gt; Either NotAKey leftResult
forall k a. k -&gt; Many k a -&gt; Either NotAKey a
</span><a href="Orville.PostgreSQL.Plan.Many.html#lookup"><span class="hs-identifier hs-var">Many.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">leftParam
</span><a href="#local-6989586621679124219"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Many leftParam leftResult
</span><a href="#local-6989586621679124223"><span class="hs-identifier hs-var">leftResults</span></a></span><span>
</span><span id="line-576"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679124218"><span class="annot"><span class="annottext">rightParam
</span><a href="#local-6989586621679124218"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-577"></span><span>                </span><span class="annot"><span class="annottext">rightResult -&gt; Either leftResult rightResult
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(rightResult -&gt; Either leftResult rightResult)
-&gt; Either NotAKey rightResult
-&gt; Either NotAKey (Either leftResult rightResult)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">rightParam
-&gt; Many rightParam rightResult -&gt; Either NotAKey rightResult
forall k a. k -&gt; Many k a -&gt; Either NotAKey a
</span><a href="Orville.PostgreSQL.Plan.Many.html#lookup"><span class="hs-identifier hs-var">Many.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">rightParam
</span><a href="#local-6989586621679124218"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Many rightParam rightResult
</span><a href="#local-6989586621679124222"><span class="hs-identifier hs-var">rightResults</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span>      </span><span class="annot"><span class="annottext">Many param (Either leftResult rightResult)
-&gt; m (Many param (Either leftResult rightResult))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param (Either leftResult rightResult)
 -&gt; m (Many param (Either leftResult rightResult)))
-&gt; Many param (Either leftResult rightResult)
-&gt; m (Many param (Either leftResult rightResult))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[param]
-&gt; (param -&gt; Either NotAKey (Either leftResult rightResult))
-&gt; Many param (Either leftResult rightResult)
forall k a. [k] -&gt; (k -&gt; Either NotAKey a) -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.Many.html#fromKeys"><span class="hs-identifier hs-var">Many.fromKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">param -&gt; Either NotAKey (Either leftResult rightResult)
Either leftParam rightParam
-&gt; Either NotAKey (Either leftResult rightResult)
</span><a href="#local-6989586621679124221"><span class="hs-identifier hs-var">eitherResult</span></a></span><span>
</span><span id="line-580"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span id="local-6989586621679124217"><span class="annot"><span class="annottext">Plan ExecuteMany param a
</span><a href="#local-6989586621679124217"><span class="hs-identifier hs-var">intermPlan</span></a></span></span><span> </span><span id="local-6989586621679124216"><span class="annot"><span class="annottext">Planned ExecuteMany param a -&gt; Plan ExecuteMany param result
</span><a href="#local-6989586621679124216"><span class="hs-identifier hs-var">continue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-581"></span><span>      </span><span id="local-6989586621679124215"><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124215"><span class="hs-identifier hs-var">interms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param a -&gt; [param] -&gt; m (Many param a)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param a
</span><a href="#local-6989586621679124217"><span class="hs-identifier hs-var">intermPlan</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-582"></span><span>      </span><span class="annot"><span class="annottext">Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span>
</span><span id="line-583"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Planned ExecuteMany param a -&gt; Plan ExecuteMany param result
</span><a href="#local-6989586621679124216"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Many param a -&gt; Planned ExecuteMany param a
forall k a. Many k a -&gt; Planned ExecuteMany k a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedMany"><span class="hs-identifier hs-var">PlannedMany</span></a></span><span> </span><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124215"><span class="hs-identifier hs-var">interms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>        </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-585"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Use"><span class="hs-identifier hs-type">Use</span></a></span><span> </span><span id="local-6989586621679124214"><span class="annot"><span class="annottext">Planned ExecuteMany param result
</span><a href="#local-6989586621679124214"><span class="hs-identifier hs-var">planned</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; m (Many param result))
-&gt; (Planned ExecuteMany param result -&gt; Many param result)
-&gt; Planned ExecuteMany param result
-&gt; m (Many param result)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Planned ExecuteMany param result -&gt; Many param result
forall k a. Planned ExecuteMany k a -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.html#resolveMany"><span class="hs-identifier hs-var">resolveMany</span></a></span><span> </span><span class="annot"><span class="annottext">(Planned ExecuteMany param result -&gt; m (Many param result))
-&gt; Planned ExecuteMany param result -&gt; m (Many param result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Planned ExecuteMany param result
</span><a href="#local-6989586621679124214"><span class="hs-identifier hs-var">planned</span></a></span><span>
</span><span id="line-587"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span> </span><span id="local-6989586621679124213"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124213"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; m (Many param result))
-&gt; Many param result -&gt; m (Many param result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[param] -&gt; (param -&gt; Either NotAKey result) -&gt; Many param result
forall k a. [k] -&gt; (k -&gt; Either NotAKey a) -&gt; Many k a
</span><a href="Orville.PostgreSQL.Plan.Many.html#fromKeys"><span class="hs-identifier hs-var">Many.fromKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either NotAKey result -&gt; param -&gt; Either NotAKey result
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">result -&gt; Either NotAKey result
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679124213"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621679124212"><span class="annot"><span class="annottext">Plan ExecuteMany param (a -&gt; result)
</span><a href="#local-6989586621679124212"><span class="hs-identifier hs-var">planF</span></a></span></span><span> </span><span id="local-6989586621679124211"><span class="annot"><span class="annottext">Plan ExecuteMany param a
</span><a href="#local-6989586621679124211"><span class="hs-identifier hs-var">planA</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-590"></span><span>      </span><span id="local-6989586621679124210"><span class="annot"><span class="annottext">Many param (a -&gt; result)
</span><a href="#local-6989586621679124210"><span class="hs-identifier hs-var">manyFs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param (a -&gt; result)
-&gt; [param] -&gt; m (Many param (a -&gt; result))
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param (a -&gt; result)
</span><a href="#local-6989586621679124212"><span class="hs-identifier hs-var">planF</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-591"></span><span>      </span><span id="local-6989586621679124209"><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124209"><span class="hs-identifier hs-var">manyAs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param a -&gt; [param] -&gt; m (Many param a)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param a
</span><a href="#local-6989586621679124211"><span class="hs-identifier hs-var">planA</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Many param (a -&gt; result) -&gt; Many param a -&gt; Many param result
forall param a b.
Many param (a -&gt; b) -&gt; Many param a -&gt; Many param b
</span><a href="Orville.PostgreSQL.Plan.Many.html#apply"><span class="hs-identifier hs-var">Many.apply</span></a></span><span> </span><span class="annot"><span class="annottext">Many param (a -&gt; result)
</span><a href="#local-6989586621679124210"><span class="hs-identifier hs-var">manyFs</span></a></span><span> </span><span class="annot"><span class="annottext">Many param a
</span><a href="#local-6989586621679124209"><span class="hs-identifier hs-var">manyAs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Chain"><span class="hs-identifier hs-type">Chain</span></a></span><span> </span><span id="local-6989586621679124207"><span class="annot"><span class="annottext">Plan ExecuteMany param b
</span><a href="#local-6989586621679124207"><span class="hs-identifier hs-var">planAB</span></a></span></span><span> </span><span id="local-6989586621679124206"><span class="annot"><span class="annottext">Plan ExecuteMany b result
</span><a href="#local-6989586621679124206"><span class="hs-identifier hs-var">planBC</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-595"></span><span>      </span><span id="local-6989586621679124205"><span class="annot"><span class="annottext">Many param b
</span><a href="#local-6989586621679124205"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param b -&gt; [param] -&gt; m (Many param b)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany param b
</span><a href="#local-6989586621679124207"><span class="hs-identifier hs-var">planAB</span></a></span><span> </span><span class="annot"><span class="annottext">[param]
</span><a href="#local-6989586621679124246"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span id="local-6989586621679124204"><span class="annot"><span class="annottext">Many b result
</span><a href="#local-6989586621679124204"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany b result -&gt; [b] -&gt; m (Many b result)
forall (m :: * -&gt; *) param result.
MonadOrville m =&gt;
Plan ExecuteMany param result -&gt; [param] -&gt; m (Many param result)
</span><a href="Orville.PostgreSQL.Plan.html#executeMany"><span class="hs-identifier hs-var">executeMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan ExecuteMany b result
</span><a href="#local-6989586621679124206"><span class="hs-identifier hs-var">planBC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Many param b -&gt; [b]
forall k a. Many k a -&gt; [a]
</span><a href="Orville.PostgreSQL.Plan.Many.html#elems"><span class="hs-identifier hs-var">Many.elems</span></a></span><span> </span><span class="annot"><span class="annottext">Many param b
</span><a href="#local-6989586621679124205"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>      </span><span class="annot"><span class="annottext">Many param result -&gt; m (Many param result)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Many param result -&gt; m (Many param result))
-&gt; Many param result -&gt; m (Many param result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Many b result -&gt; Many param b -&gt; Many param result
forall b c a. Many b c -&gt; Many a b -&gt; Many a c
</span><a href="Orville.PostgreSQL.Plan.Many.html#compose"><span class="hs-identifier hs-var">Many.compose</span></a></span><span> </span><span class="annot"><span class="annottext">Many b result
</span><a href="#local-6989586621679124204"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Many param b
</span><a href="#local-6989586621679124205"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span class="hs-comment">{- |
  'Explain' is an tag type used as the 'scope' variable when explaining a
  'Plan' via the 'explain' function.
-}</span><span>
</span><span id="line-603"></span><span class="hs-keyword">data</span><span> </span><span id="Explain"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier hs-var">Explain</span></a></span></span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ExplainOne"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExplainOne"><span class="hs-identifier hs-var">ExplainOne</span></a></span></span><span>
</span><span id="line-605"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ExplainMany"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#ExplainMany"><span class="hs-identifier hs-var">ExplainMany</span></a></span></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-comment">{- |
  'explain' produces a textual description of the steps outlined by
  a 'Plan' -- in most cases example SQL queries. If you want to see
  the explanation of how the plan will run with multiple input parameters,
  you can use 'planMany' to adapt it before calling 'explain'.
-}</span><span>
</span><span id="line-613"></span><span id="local-6989586621679124199"><span id="local-6989586621679124200"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#explain"><span class="hs-identifier hs-type">explain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier hs-type">Explain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124200"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124199"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-614"></span><span id="explain"><span class="annot"><span class="annottext">explain :: Plan Explain param result -&gt; [String]
</span><a href="Orville.PostgreSQL.Plan.html#explain"><span class="hs-identifier hs-var hs-var">explain</span></a></span></span><span> </span><span id="local-6989586621679124198"><span class="annot"><span class="annottext">Plan Explain param result
</span><a href="#local-6989586621679124198"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-615"></span><span>  </span><span class="annot"><span class="annottext">Explanation -&gt; [String]
</span><a href="Orville.PostgreSQL.Plan.Explanation.html#explanationSteps"><span class="hs-identifier hs-var">Exp.explanationSteps</span></a></span><span> </span><span class="annot"><span class="annottext">(Explanation -&gt; [String]) -&gt; Explanation -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-616"></span><span>    </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param result -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="Orville.PostgreSQL.Plan.html#ExplainOne"><span class="hs-identifier hs-var">ExplainOne</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param result
</span><a href="#local-6989586621679124198"><span class="hs-identifier hs-var">plan</span></a></span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span class="hs-comment">{- |
  'explainPlan' is an internal helper to executes a plan with the
  'scope' type fixed to 'Explain' to ensure that all 'Planned'
  values are constructed with the 'PlannedExplain' constructor.
-}</span><span>
</span><span id="line-623"></span><span id="local-6989586621679124489"><span id="local-6989586621679124490"><span class="annot"><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-type">explainPlan</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-624"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier hs-type">Explain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-625"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Plan"><span class="hs-identifier hs-type">Plan</span></a></span><span> </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Explain"><span class="hs-identifier hs-type">Explain</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124490"><span class="hs-identifier hs-type">param</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679124489"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-626"></span><span>  </span><span class="annot"><a href="Orville.PostgreSQL.Plan.Explanation.html#Explanation"><span class="hs-identifier hs-type">Exp.Explanation</span></a></span></span></span><span>
</span><span id="line-627"></span><span id="explainPlan"><span class="annot"><span class="annottext">explainPlan :: Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var hs-var">explainPlan</span></a></span></span><span> </span><span id="local-6989586621679124195"><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621679124194"><span class="annot"><span class="annottext">Plan Explain param result
</span><a href="#local-6989586621679124194"><span class="hs-identifier hs-var">plan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-628"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Plan Explain param result
</span><a href="#local-6989586621679124194"><span class="hs-identifier hs-var">plan</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-629"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanOp"><span class="hs-identifier hs-type">PlanOp</span></a></span><span> </span><span id="local-6989586621679124193"><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124193"><span class="hs-identifier hs-var">operation</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-630"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-631"></span><span>        </span><span class="annot"><span class="annottext">Explain
</span><a href="Orville.PostgreSQL.Plan.html#ExplainOne"><span class="hs-identifier hs-var">ExplainOne</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-632"></span><span>          </span><span class="annot"><span class="annottext">Operation param result -&gt; Explanation
forall param result. Operation param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.Operation.html#explainOperationOne"><span class="hs-identifier hs-var hs-var">Op.explainOperationOne</span></a></span><span> </span><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124193"><span class="hs-identifier hs-var">operation</span></a></span><span>
</span><span id="line-633"></span><span>        </span><span class="annot"><span class="annottext">Explain
</span><a href="Orville.PostgreSQL.Plan.html#ExplainMany"><span class="hs-identifier hs-var">ExplainMany</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-634"></span><span>          </span><span class="annot"><span class="annottext">Operation param result -&gt; Explanation
forall param result. Operation param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.Operation.html#explainOperationMany"><span class="hs-identifier hs-var hs-var">Op.explainOperationMany</span></a></span><span> </span><span class="annot"><span class="annottext">Operation param result
</span><a href="#local-6989586621679124193"><span class="hs-identifier hs-var">operation</span></a></span><span>
</span><span id="line-635"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanMany"><span class="hs-identifier hs-type">PlanMany</span></a></span><span> </span><span id="local-6989586621679124190"><span class="annot"><span class="annottext">forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124190"><span class="hs-identifier hs-var">manyPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-636"></span><span>      </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param result -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="Orville.PostgreSQL.Plan.html#ExplainMany"><span class="hs-identifier hs-var">ExplainMany</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param result
forall manyScope. Plan manyScope param result
</span><a href="#local-6989586621679124190"><span class="hs-identifier hs-var">manyPlan</span></a></span><span>
</span><span id="line-637"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#PlanEither"><span class="hs-identifier hs-type">PlanEither</span></a></span><span> </span><span id="local-6989586621679124189"><span class="annot"><span class="annottext">Plan Explain leftParam leftResult
</span><a href="#local-6989586621679124189"><span class="hs-identifier hs-var">leftPlan</span></a></span></span><span> </span><span id="local-6989586621679124188"><span class="annot"><span class="annottext">Plan Explain rightParam rightResult
</span><a href="#local-6989586621679124188"><span class="hs-identifier hs-var">rightPlan</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-638"></span><span>      </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain leftParam leftResult -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain leftParam leftResult
</span><a href="#local-6989586621679124189"><span class="hs-identifier hs-var">leftPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explanation -&gt; Explanation -&gt; Explanation
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain rightParam rightResult -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain rightParam rightResult
</span><a href="#local-6989586621679124188"><span class="hs-identifier hs-var">rightPlan</span></a></span><span>
</span><span id="line-639"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span id="local-6989586621679124187"><span class="annot"><span class="annottext">Plan Explain param a
</span><a href="#local-6989586621679124187"><span class="hs-identifier hs-var">intermPlan</span></a></span></span><span> </span><span id="local-6989586621679124186"><span class="annot"><span class="annottext">Planned Explain param a -&gt; Plan Explain param result
</span><a href="#local-6989586621679124186"><span class="hs-identifier hs-var">continue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-640"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679124185"><span class="annot"><span class="annottext">nextPlan :: Plan Explain param result
</span><a href="#local-6989586621679124185"><span class="hs-identifier hs-var hs-var">nextPlan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Planned Explain param a -&gt; Plan Explain param result
</span><a href="#local-6989586621679124186"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="annot"><span class="annottext">Planned Explain param a
forall param a. Planned Explain param a
</span><a href="Orville.PostgreSQL.Plan.html#PlannedExplain"><span class="hs-identifier hs-var">PlannedExplain</span></a></span><span>
</span><span id="line-641"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param a -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param a
</span><a href="#local-6989586621679124187"><span class="hs-identifier hs-var">intermPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explanation -&gt; Explanation -&gt; Explanation
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param result -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param result
</span><a href="#local-6989586621679124185"><span class="hs-identifier hs-var">nextPlan</span></a></span><span>
</span><span id="line-642"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Use"><span class="hs-identifier hs-type">Use</span></a></span><span> </span><span class="annot"><span class="annottext">Planned Explain param result
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-643"></span><span>      </span><span class="annot"><span class="annottext">Explanation
</span><a href="Orville.PostgreSQL.Plan.Explanation.html#noExplanation"><span class="hs-identifier hs-var">Exp.noExplanation</span></a></span><span>
</span><span id="line-644"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">result
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-645"></span><span>      </span><span class="annot"><span class="annottext">Explanation
</span><a href="Orville.PostgreSQL.Plan.Explanation.html#noExplanation"><span class="hs-identifier hs-var">Exp.noExplanation</span></a></span><span>
</span><span id="line-646"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621679124183"><span class="annot"><span class="annottext">Plan Explain param (a -&gt; result)
</span><a href="#local-6989586621679124183"><span class="hs-identifier hs-var">planF</span></a></span></span><span> </span><span id="local-6989586621679124182"><span class="annot"><span class="annottext">Plan Explain param a
</span><a href="#local-6989586621679124182"><span class="hs-identifier hs-var">planA</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-647"></span><span>      </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param (a -&gt; result) -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param (a -&gt; result)
</span><a href="#local-6989586621679124183"><span class="hs-identifier hs-var">planF</span></a></span><span> </span><span class="annot"><span class="annottext">Explanation -&gt; Explanation -&gt; Explanation
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param a -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param a
</span><a href="#local-6989586621679124182"><span class="hs-identifier hs-var">planA</span></a></span><span>
</span><span id="line-648"></span><span>    </span><span class="annot"><a href="Orville.PostgreSQL.Plan.html#Chain"><span class="hs-identifier hs-type">Chain</span></a></span><span> </span><span id="local-6989586621679124181"><span class="annot"><span class="annottext">Plan Explain param b
</span><a href="#local-6989586621679124181"><span class="hs-identifier hs-var">planAB</span></a></span></span><span> </span><span id="local-6989586621679124180"><span class="annot"><span class="annottext">Plan Explain b result
</span><a href="#local-6989586621679124180"><span class="hs-identifier hs-var">planBC</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-649"></span><span>      </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain param b -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain param b
</span><a href="#local-6989586621679124181"><span class="hs-identifier hs-var">planAB</span></a></span><span> </span><span class="annot"><span class="annottext">Explanation -&gt; Explanation -&gt; Explanation
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Explain -&gt; Plan Explain b result -&gt; Explanation
forall param result.
Explain -&gt; Plan Explain param result -&gt; Explanation
</span><a href="Orville.PostgreSQL.Plan.html#explainPlan"><span class="hs-identifier hs-var">explainPlan</span></a></span><span> </span><span class="annot"><span class="annottext">Explain
</span><a href="#local-6989586621679124195"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Plan Explain b result
</span><a href="#local-6989586621679124180"><span class="hs-identifier hs-var">planBC</span></a></span><span>
</span><span id="line-650"></span></pre></body></html>